angular.module("twainers",["ionic","ngCordova","angularMoment","templates","common.directives","common.userService","twainers.config","twainers.profile","twainers.availability","twainers.activity","twainers.notifications","twainers.feedback"]).run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("login",{url:"/",templateUrl:"login.html",controller:"LoginCtrl"})}]).factory("Parse",function(){return window.Parse}).controller("LoginCtrl",["$state","Parse","$ionicSlideBoxDelegate","$scope",function(t,e,i,n){var o=e.User.current();o&&t.go("activities.scheduled"),n.navigateToSlide=function(t){i.slide(t)}}]).controller("AppCtrl",["$scope","userService","$state","$ionicPopup","notificationsService","$ionicSideMenuDelegate",function(t,e,i,n,o,r){t.navigation={hideBackButton:!0},t.$watch(function(){return o.getNotificationCount()},function(e){t.notificationCount=e}),t.$on("$stateChangeSuccess",function(){r.isOpen()&&r.toggleLeft()}),t.$watch(function(){return Parse.User.current()},function(e){e&&(t.profilePic="https://graph.facebook.com/"+e.attributes.profile.id+"/picture?type=normal",o.find({recipient:Parse.User.current()}))}),t.login=function(){e.login().then(function(t,e){return i.go(e?"availability.create.sport":"activities.scheduled")},function(){var t=n.alert({title:"Login unsuccessful",template:"Please try again"});t.then(function(){})})},t.logout=function(){return Parse.User.logOut(),i.go("login")}}]);
angular.module("twainers.config",[]).constant("APP_NAME","Twainers").constant("APP_VERSION","0.1").constant("FIRST_URL","http://www.twainers.com").constant("WITHIN_DISTANCE",10).constant("BLURB_INTRO","Hi! I'm looking for a training partner to give me the motivation to keep up my training and keep my ").constant("BLURB_END"," interesting. Get in touch!");
!function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/templates/activities-list.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div ng-repeat="activity in activities" ng-click="showActivity(activity)" ng-show="activities.length > 0" class="list card">\n      <activity-profile user="activity.user" twainee="activity.users"></activity-profile>\n\n      <div class="item {{activity.attributes.sport}}Background">\n        <div class="row">\n          <div class="col col-66">\n            <h3><i class="icon-logo"></i> {{activity.attributes.date | date:\'EEEE, d MMMM\'}}</h3>\n          </div>\n          <div class="col">\n            <h3><i class="ion-clock"></i> {{activity.attributes.date | date:\'h:mm a\'}}</h3>\n          </div>\n        </div>\n      </div>\n      <div class="item item-body">\n        <div class="row">\n\n          <div class="col">\n            <i class="icon-{{activity.attributes.sport}} {{activity.attributes.sport}}Icon"></i> {{activity.attributes.sport | activityVerb | sentenceCase}}\n          </div>\n          <div class="col">\n            <i class="icon-distance {{activity.attributes.sport}}Icon"></i> {{activity.attributes.distance | userMetric:currentUser.attributes.metric}}\n          </div>\n          <div class="col">\n            <i class="ion-speedometer {{activity.attributes.sport}}Icon"></i>\n            {{activity.attributes.speed | userMetric:currentUser.attributes.metric}}/h\n          </div>\n\n        </div>\n        <div class="row">\n          <div class="col longText">\n            <i class="ion-location {{activity.attributes.sport}}Icon"></i> {{activity.attributes.locationName}}\n          </div>\n\n        </div>\n        <!-- IF proposed show how long it has been waiting -->\n        <div ng-if="activity.attributes.status === \'proposed\' && activity.attributes.lastUpdatedBy.id === currentUser.id" class="energized">\n          <p>Last communicated: <strong><span am-time-ago="activity.updatedAt"></span></strong></p>\n        </div>\n      </div>\n\n      <!-- IF request show the buttons -->\n      <div class="item tabs tabs-secondary tabs-icon-only" ng-if="activity.attributes.status === \'proposed\' && activity.attributes.lastUpdatedBy.id !== currentUser.id">\n        <a class="tab-item" ng-click="acceptActivity(activity)" prevent-default>\n          <i class="icon ion-checkmark success"></i>\n        </a>\n        <a class="tab-item" ng-click="showActivity(activity)" prevent-default>\n          <i class="icon ion-compose info"></i>\n        </a>\n        <a class="tab-item" ng-click="rejectActivity(activity)" prevent-default>\n          <i class="icon ion-close danger"></i>\n        </a>\n      </div>\n\n    </div>\n\n    <div ng-show="activities.length === 0" class="text-center">\n      <!-- Scheduled Activities -->\n      <div ng-if="type ===\'scheduled\' ">\n        <h1><i class="ion-calendar largeIcon muted"></i></h1>\n        <h2 class="muted">No scheduled<br> activities!</h2>\n        <p>You can do better than that!</p>\n        <br>\n        <button class="button button-twainers button-wide" ui-sref="availability.list">\n          <i class="ion-search"></i>\n          Find a Training Partner\n        </button>\n        <br><br>\n        <social-share></social-share>\n      </div>\n\n      <!-- Requests Activities -->\n      <div ng-if="type ===\'proposed\' ">\n        <h1><i class="ion-person-add largeIcon muted"></i></h1>\n        <h2 class="muted">No proposed <br> activities!</h2>\n        <p>But finding training partners<br>\n        is a two way street.</p>\n        <br>\n        <button class="button button-twainers button-wide" ui-sref="availability.list">\n          <i class="ion-search"></i>\n          Find a Training Partner\n        </button>\n        <br><br>\n        <social-share></social-share>\n      </div>\n\n      <!-- Requests Activities -->\n      <div ng-if="type ===\'requests\' ">\n        <h1><i class="ion-person-add largeIcon muted"></i></h1>\n        <h2 class="muted">No requested <br> activities!</h2>\n        <p>You can do better than that.</p>\n        <br>\n        <button class="button button-twainers button-wide" ui-sref="availability.list">\n          <i class="ion-search"></i>\n          Find a Training Partner\n        </button>\n        <br><br>\n        <social-share></social-share>\n      </div>\n\n    </div>\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/templates/activities.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-view title="<i class=\'icon-logo headerIcon\'></i> Activities">\n\n  <ion-nav-buttons side="left">\n    <!-- <button class="button button-icon icon ion-navicon"></button> -->\n    <button menu-toggle="left" class="button button-clear">\n      <i class="ion-android-mixer headerIcon"></i>\n    </button>\n  </ion-nav-buttons>\n\n\n  <ion-nav-buttons side="right">\n    <button class="button button-clear" ui-sref="notifications">\n      <i class="ion-android-reminder headerIcon" ng-class="{\'unreadIcon\': notificationCount > 0}"></i>\n    </button><button class="button button-clear" ui-sref="availability.list">\n      <i class="ion-android-search headerIcon"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-header-bar align-title="left" class="bar-subheader bar-positive noPadding">\n    <div class="tabs tabs-light">\n      <a class="tab-item" ui-sref-active="active highlightButton" ui-sref="activities.scheduled" >\n        Scheduled\n      </a>\n      <a class="tab-item" ui-sref-active="active highlightButton" ui-sref="activities.proposed">\n        Proposed\n      </a>\n      <a class="tab-item" ui-sref-active="active highlightButton" ui-sref="activities.requests">\n        Requests\n      </a>\n      <!-- <a class="tab-item" ui-sref-active="active" ui-sref="activities.completed">\n        Completed\n      </a> -->\n    </div>\n  </ion-header-bar>\n\n  <ion-nav-view animation="slide-left-right"></ion-nav-view>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/templates/activity.html",'<ion-nav-buttons side="right">\n  <button class="button button-clear" ui-sref="activities.scheduled">\n    <i class="icon-logo headerIcon"></i>\n  </button>\n</ion-nav-buttons>\n\n<ion-nav-view>\n\n</ion-nav-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/templates/activityCreate.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-view title="{{activity.sport | sentenceCase}}">\n  <ion-content>\n\n    <user-summary user="activity.user"></user-summary>\n\n    <!-- DETAILS & PREVIOUS TABS -->\n    <div class="button-bar">\n      <button class="button" ng-click="showPrevious = false" ng-class="{\'active button-{{activity.sport |colour}}\': !showPrevious}"><i class="ion-clipboard"></i> {{activity.sport | activityVerb | sentenceCase}} Details</button>\n      <button class="button" ng-click="showPrevious = true" ng-class="{\'active button-{{activity.sport |colour}}\': showPrevious}"><i class="ion-star"></i> Previous {{activity.sport | activityVerb:true | sentenceCase}}</button>\n    </div>\n    <user-previous-runs user="activity.user" viewer="currentUser" ng-show="showPrevious"></user-previous-runs>\n\n    <div ng-show="!showPrevious">\n      <div ng-show="invalid" class="errorInfo">\n        <div class="row">\n          <ul class="list">\n            <li ng-if="invalid.location"><p>You must select a starting point.</p></li>\n            <li ng-if="invalid.distance"><p>You must specify a distance.</p></li>\n            <li ng-if="invalid.date"><p>You must specify a date and a starting time.</p></li>\n            <li ng-if="invalid.dateFuture"><p>The starting time must be in the future.</p></li>\n          </ul>\n        </div>\n      </div>\n      <div class="row" ng-click="toggleMap()">\n        <div class="col col-33">\n          <h5>Starting Point</h5>\n        </div>\n        <div class="col col-50">\n          <h6 class="longText startingPointLocation">{{activity.locationName}}</h6>\n        </div>\n        <div class="col">\n          <h6 class="hideMapIcon"><i ng-class="{\'ion-chevron-up\': map.show, \'ion-chevron-down\': !map.show}"></i></h6>\n        </div>\n      </div>\n      <div id="map" data-tap-disabled="true" ng-show="map.show"></div>\n      <form novalidate="novalidate" ng-submit="proposeRun()">\n        <div class="list">\n          <label class="item item-input">\n            <span class="input-label">Distance ({{currentUser.attributes.metric | metricToString}})</span>\n            <input type="number" ng-model="activity.distance"><!--\n            <i class="icon ion-alert-circled error col col-10"></i> -->\n          </label>\n          <label class="item item-input">\n            <span class="input-label">Date</span>\n            <input type="date" ng-model="time.tempDate" ng-change="saveDateTime(time, activity)" value="{{time.tempDate}}">\n            <!-- <i class="icon ion-alert-circled error col col-10"></i> -->\n          </label>\n          <label class="item item-input">\n            <span class="input-label">Time</span>\n            <input type="time" ng-model="time.tempTime" ng-change="saveDateTime(time, activity)" value="{{time.tempTime}}">\n            <!-- <i class="icon ion-alert-circled error col col-10"></i> -->\n          </label>\n\n          <div class="item item-divider" ng-if="activity.messages.length > 0">\n            Messages\n          </div>\n          <activity-messages messages="activity.messages"></activity-messages>\n          <br>\n          <div class="item item-divider" ng-if="activity.messages.length > 0">\n            Send a new message\n          </div>\n\n          <label class="item item-input">\n            <textarea ng-model="input.message" placeholder="Write a message to {{activity.user.attributes.firstName}}"></textarea>\n          </label>\n        </div>\n\n\n        <button class="button button-block button-{{activity.sport | colour}}" type="submit">{{action}} {{activity.sport | activityVerb | sentenceCase}}</button>\n      </form>\n    </div>\n  </ion-content>\n</ion-view>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/templates/activityShow.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-view title="{{activity.attributes.sport | sentenceCase}}">\n\n  <ion-content>\n\n    <activity-profile user="activity.user" twainee="activity.users"></activity-profile>\n\n    <!-- DETAILS & MESSAGES TABS -->\n    <div class="button-bar">\n      <button class="button" ng-click="toggleMessages()" ng-class="{\'active button-{{activity.attributes.sport |colour}}\': !showMessages}"><i class="ion-clipboard"></i> Details</button>\n      <button class="button" ng-click="toggleMessages()" ng-class="{\'active button-{{activity.attributes.sport |colour}}\': showMessages}"><i class="ion-chatbox"></i> Messages</button>\n    </div>\n\n    <!-- STATUS -->\n    <div class="row activityStatus" ng-if="[\'proposed\', \'scheduled\'].indexOf(activity.attributes.status) === -1">\n      <h2 class="text-center">Activity {{activity.attributes.status | statusVerb}}</h2>\n    </div>\n\n    <!-- DETAILS -->\n    <div ng-show="!showMessages">\n      <div class="row">\n        <div class="col col-66">\n          <h4><i class="icon-logo {{activity.attributes.sport}}Icon"></i> {{activity.attributes.date | date:\'EEEE, d MMMM\'}}</h4>\n        </div>\n        <div class="col">\n          <h4><i class="ion-clock {{activity.attributes.sport}}Icon"></i> {{activity.attributes.date | date:\'h:mm a\'}}</h4>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col col-66">\n          <h4>\n            <i class="icon-distance {{activity.attributes.sport}}Icon"></i> {{activity.attributes.distance | userMetric:currentUser.attributes.metric}}\n          </h4>\n        </div>\n        <div class="col">\n          <h4>\n            <i class="ion-speedometer {{activity.attributes.sport}}Icon"></i> {{activity.attributes.speed | userMetric:currentUser.attributes.metric}}/h\n          </h4>\n        </div>\n      </div>\n\n\n      <!-- LOCATION -->\n      <div class="row" ng-click="toggleMap()">\n        <div class="col col-90 longText">\n          <h4><i class="ion-location {{activity.attributes.sport}}Icon"></i> {{activity.attributes.locationName}}</h4>\n        </div>\n        <div class="col" ng-if="activity.attributes.location">\n          <h6 class="hideMapIcon"><i ng-class="{\'ion-chevron-up\': map.show, \'ion-chevron-down\': !map.show}"></i></h6>\n        </div>\n      </div>\n\n      <div id="map" data-tap-disabled="true" ng-show="map.show && activity.attributes.location"></div>\n\n      <!-- JOIN and LEAVE BUTTONS -->\n      <div class="item tabs tabs-secondary tabs-icon-only" ng-if="activity.attributes.status === \'scheduled\'">\n        <a class="tab-item" ng-click="join()" ng-if="!member">\n          <i class="icon ion-checkmark success"></i>\n          Like\n        </a>\n        <a class="tab-item" ng-click="edit()" ng-if="member && activity.attributes.twainee.length === 2" prevent-default>\n          <i class="icon ion-compose info"></i>\n          Comment\n        </a>\n        <a class="tab-item" ng-click="leave()" ng-if="member" prevent-default>\n          <i class="icon ion-close danger"></i>\n          Share\n        </a>\n      </div>\n\n<!--			SHOW FEEDBACK FOR THE CURRENT USER-->\n			<activity-messages current-user="currentUser" messages="feedback"></activity-messages>\n\n    </div>\n\n    <div ng-show="showMessages">\n      <activity-messages messages="activity.messages" current-user="currentUser"></activity-messages>\n\n      <!-- SHOW NEW MESSAGE IF ACTIVITY STILL ACTIVE -->\n      <div ng-if="[\'proposed\', \'scheduled\'].indexOf(activity.attributes.status) !== -1" class="card">\n        <div class="item item-divider">\n          Send a new message\n        </div>\n\n        <label class="item item-input">\n          <textarea ng-model="input.message" placeholder="Write a message to {{activity.user.attributes.firstName}}"></textarea>\n        </label>\n        <button ng-click="sendMessage()" class="button button-{{activity.attributes.sport | colour}} button-block">Send Message</button>\n      </div>\n\n      <!-- //NO MESSAGES AND INACTIVE -->\n      <div ng-if="[\'proposed\', \'scheduled\'].indexOf(activity.attributes.status) === -1 && activity.messages.length === 0" class="text-center">\n        <h4 class="text-muted">There were no messages <br>associated with this activity.</h4>\n    </div>\n\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/availabilities.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-view title="<i class=\'ion-android-search headerIcon\'></i> Saved Availabilities">\n  <ion-nav-buttons side="left">\n    <!-- <button class="button button-icon icon ion-chevron-left" ui-sref="activities.scheduled"></button> -->\n    <button class="button button-clear" ui-sref="activities.scheduled">\n      <i class="ion-chevron-left"></i>\n    </button>\n    <!-- <button class="button button-icon icon ion-home" ui-sref="activities.scheduled"></button> -->\n  </ion-nav-buttons>\n  <ion-nav-buttons side="right">\n    <button class="button button-clear" ui-sref="availability.create.sport">\n      <i class="ion-plus-circled headerIcon"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content>\n    <!-- <ion-list show-delete="true"> -->\n    <div class="card list" ng-repeat="availability in availabilities" ng-click="getResults(availability)">\n      <div class="item">\n        <div class="row">\n          <div class="col">\n            <i class="icon-{{availability.attributes.sport}} {{availability.attributes.sport}}Icon"></i> {{availability.attributes.sport | activityVerb | sentenceCase}}\n          </div>\n          <div class="col">\n            <i class="icon-distance {{availability.attributes.sport}}Icon"></i> {{availability.attributes.distance | userMetric:currentUser.attributes.metric}}\n          </div>\n          <div class="col">\n            <i class="ion-speedometer {{availability.attributes.sport}}Icon"></i> {{availability.attributes.speed | userMetric:currentUser.attributes.metric}}/h\n          </div>\n        </div>\n        <div class="row">\n          <div class="col longText">\n            <i class="ion-location {{availability.attributes.sport}}Icon"></i> {{availability.attributes.locationName}}\n          </div>\n        </div>\n        <div class="row">\n          <div class="col" ng-repeat="day in times.days">\n            <i class="mediumIcon {{availability.attributes.sport}}Icon" ng-class="times.dayIcon(day, availability.attributes.days)"></i>\n          </div>\n        </div>\n        <div class="row">\n          <div class="col" ng-repeat="time in times.times">\n            <i class="mediumIcon {{availability.attributes.sport}}Icon" ng-class="times.timeIcon(time, availability.attributes.times)"></i>\n          </div>\n        </div>\n      </div>\n      <div class="item tabs tabs-secondary tabs-icon-left">\n        <!-- <a class="tab-item muted" ng-click="edit()" prevent-default>\n          <p><i class="icon ion-edit "></i>\n          Edit</p>\n        </a> -->\n        <a class="tab-item" ng-click="remove(availability)" prevent-default>\n          <p class="muted"><i class="icon ion-trash-b"></i>\n          Remove</p>\n        </a>\n      </div>\n    </div>\n\n  </ion-content>\n</ion-view>\n<!-- <ion-footer-bar class="bar-twainers" ui-sref="availability.create.sport">\n  <h1 class="title">Create a new availability</h1>\n</ion-footer-bar> -->')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/availability.html","<ion-nav-view></ion-nav-view>")}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/create.html",'<ion-view title="Create a New Availability">\n  <ion-header-bar class="bar-light bar-subheader noPadding">\n\n    <div class="tabs tabs-light">\n      <a class="tab-item" ui-sref-active="active" ui-sref="availability.create.sport" >\n        Sport\n      </a>\n      <a class="tab-item" ui-sref-active="active" ui-sref="availability.create.distance" ng-disabled="!availability.sport" >\n        Distance\n      </a>\n      <a class="tab-item" ui-sref-active="active" ui-sref="availability.create.speed" ng-disabled="!availability.distance">\n        Level\n      </a>\n      <a class="tab-item" ui-sref-active="active" ui-sref="availability.create.location" ng-disabled="!availability.speed">\n        Location\n      </a>\n      <a class="tab-item" ui-sref-active="active" ui-sref="availability.create.times" ng-disabled="!availability.location">\n        Times\n      </a>\n    </div>\n\n  </ion-header-bar>\n  <!-- <ion-content class="has-subheader"> -->\n\n\n    <ion-nav-view></ion-nav-view>\n    <!-- // slide causing unpredictable problems -->\n    <!-- <ion-nav-view class="slide-left-right"></ion-nav-view> -->\n  <!-- </ion-content> -->\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/distance.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div class="text-center">\n      <br>\n      <h4 class="muted">Great choice!</h4>\n      <br>\n      <h3>How far do you want to go?</h3>\n\n      <div class="range range-{{sport | colour}}">\n        <!-- <i class="icon-distance icon{{sport}}"></i>\n        <p>{{distanceOptions.min}}</p> -->\n        <input type="range" name="distance" min="{{distanceOptions.min}}" max="{{distanceOptions.max}}" value="{{temp.distance}}" ng-model="temp.distance">\n        <!-- <p>{{distanceOptions.max}}</p>\n        <i class="icon-distance"></i> -->\n      </div>\n\n      <div class="text-center">\n\n        <h3>{{temp.distance}} {{metricDisplay}}</h3>\n\n        <div class="row">\n          <div class="col text-right">\n            Mi\n          </div>\n          <div class="col">\n            <i class="{{sport}}Icon mediumIcon" ng-class="{\'ion-toggle-filled\': temp.metric, \'ion-toggle\': !temp.metric}" ng-click="toggleMetric()"></i>\n            <!-- <ion-toggle ng-model="temp.metric" ng-checked="temp.metric" ng-click="toggleMetric(temp.distance)" class="metricToggle" toggle-class="toggle-light"> -->\n          </div>\n          <div class="col text-left">\n            Km\n          </div>\n        </div>\n      </div>\n\n      <button class="button button-block button-{{sport | colour}}" ng-click="next()">\n        Next\n      </button>\n    </div>\n  </ion-content>\n</ion-view>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/location.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div class="text-center">\n      <h4 class="muted">We\'re almost there</h4>\n      <h3>Where do you train?</h3>\n\n      <p>Search for a location or click on the map</p>\n      <div class="list">\n      <form ng-submit="findLocation()">\n        <div class="item item-input-inset">\n          <label class="item-input-wrapper">\n            <i class="icon ion-ios7-search placeholder-icon"></i>\n            <input type="text" placeholder="Search" ng-model="input.address">\n          </label>\n          <button class="button button-small" type="submit" id="mapSearch">\n            Search\n          </button>\n        </div>\n      </form>\n      </div>\n\n      <div class="row" ng-click="toggleMap()">\n        <div class="col col-25">\n          <span class="h5">Location:</span>\n        </div>\n        <div class="col col-66">\n          {{availability.locationName}}\n        </div>\n        <div class="col">\n          <i ng-class="{\'ion-chevron-up\': map.show, \'ion-chevron-down\': !map.show}"></i>\n        </div>\n      </div>\n\n      <div id="map" data-tap-disabled="true" ng-show="map.show"></div>\n\n      <button class="button button-block button-{{sport | colour}}" ui-sref="availability.create.times" ng-disabled="!availability.location">\n        Next\n      </button>\n    </div>\n  </ion-content>\n</ion-view>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/results.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-view title="<i class=\'ion-bonfire headerIcon\'></i> Matches">\n  <ion-nav-buttons side="left">\n    <button class="button button-clear" ui-sref="availability.list">\n      <i class="ion-chevron-left"></i>\n    </button>\n  </ion-nav-buttons>\n  <ion-nav-buttons side="right">\n    <button class="button button-clear" ui-sref="activities.scheduled">\n      <i class="icon-logo headerIcon"></i>\n    </button>\n  </ion-nav-buttons>\n\n  <ion-content class="has-header">\n\n    <!-- SAVED AVAILABILITY -->\n\n    <div ng-if="newAvailability" class="row energizedRow noPadding" ng-show="!hideNotice">\n      <div class="col col-90 text-center">\n        <h5>Availability Saved</h5>\n        </div>\n        <div class="col textHeader">\n          <i class="ion-close" ng-click="hideNotice = true"> </i>\n        </div>\n      </div>\n    </div>\n\n\n<!-- <div class="list card" ng-if="user"> -->\n\n    <div class="list card" ng-if="matches.length !== 0" ng-repeat="match in matches" ng-click="click(match)">\n      <!-- <a > -->\n        <activity-profile user="match.attributes.user" twainee="match.users" match="match.attributes" metric="currentUser.attributes.metric"></activity-profile>\n\n\n        <div class="item {{match.attributes.sport}}Background">\n          <h2><i class="ion-navigate"></i> {{match.attributes.distanceFrom | userMetric:currentUser.attributes.metric}} from you</h2>\n        </div>\n\n        <div class="item item-body">\n\n          <div class="row">\n            <div class="col">\n              <i class="icon-distance {{match.attributes.sport}}Icon"></i> {{match.attributes.distance | userMetric:currentUser.attributes.metric}}\n            </div>\n            <div class="col">\n              <i class="ion-speedometer {{match.attributes.sport}}Icon"></i>\n              {{match.attributes.speed | userMetric:currentUser.attributes.metric}}/h\n            </div>\n\n          </div>\n          <div class="row">\n            <div class="col longText">\n              <i class="ion-location {{match.attributes.sport}}Icon"></i> {{match.attributes.locationName}}\n            </div>\n\n          </div>\n\n          <div ng-if="match.type===\'availability\'">\n            <div class="row">\n              <div class="col" ng-repeat="day in times.days">\n                <i class="mediumIcon {{match.attributes.sport}}Icon" ng-class="times.dayIcon(day, match.attributes.days)"></i>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col" ng-repeat="time in times.times">\n                <i class="mediumIcon {{match.attributes.sport}}Icon" ng-class="times.timeIcon(time, match.attributes.times)"></i>\n              </div>\n            </div>\n          </div>\n\n          <div ng-if="match.type === \'activity\'" class="row">\n            <div class="col">\n              <i class="ion-clock {{match.attributes.sport}}Icon"></i> {{match.attributes.date | date:\'h:mm a EEE d MMM\'}}\n            </div>\n          </div>\n        </div>\n      <!-- </a> -->\n    </div>\n\n    <!-- NO MATCHES -->\n    <div ng-if="matches.length === 0" class="text-center">\n    <i class="ion-bonfire largeIcon muted"></i>\n      <h1 class="muted">Sorry</h1>\n      <h3 class="muted">There are no matches yet</h3>\n\n      <p>Sometimes others just need a bit<br>\n      of motivation to get started.</p>\n\n      <button class="button button-twainers button-wide" ui-sref="availability.list">\n        <i class="ion-search"></i>\n        Try again\n      </button>\n      <br><br>\n\n      <social-share></social-share>\n    </div>\n\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/speed.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div class="text-center">\n      <h4 class="muted">Perfect distance... </h4>\n      <h5 class="muted">if I do say so myself</h5>\n      <h3>What is your pace?</h3>\n\n\n      <label class="item item-input">\n        <span class="input-label">{{metricDisplay | sentenceCase}} per hour</span>\n        <input type="number" ng-model="temp.speed" ng-disabled="temp.speedEditable">\n      </label>\n\n      <br>\n      ------- or ---------\n      <br><br>\n\n      <ul class="list">\n        <li class="item item-checkbox">\n           <label class="checkbox checkbox-{{sport | colour}}">\n             <input type="checkbox" ng-click="toggleSpeed()">\n           </label>\n           I don\'t know my pace\n        </li>\n      </ul>\n\n      <button class="button button-block button-{{sport | colour}}" ng-click="next()" ng-disabled="!temp.speed">\n        Next\n      </button>\n    </div>\n  </ion-content>\n</ion-view>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/sport.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div class="text-center">\n\n      <h4 class="muted">Let\'s find a match for <br>when you can train</h4>\n      <h3>We\'ll start with your sport</h3>\n\n      <div class="row">\n        <div class="col walkingBackground" ng-click="setSport(\'walking\')">\n          <!-- <img src="img/running.jpeg" width="200" height="200" ng-click="setSport(\'running\')"> -->\n          <i class="icon-walking largeIcon whiteIcon"></i>\n          <h4 class=" whiteIcon">Walking</h4>\n        </div>\n        <div class="col runningBackground" ng-click="setSport(\'running\')">\n          <!-- <img src="img/running.jpeg" width="200" height="200" ng-click="setSport(\'running\')"> -->\n          <i class="icon-running largeIcon whiteIcon"></i>\n          <h4 class=" whiteIcon">Running</h4>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col cyclingBackground" ng-click="setSport(\'cycling\')">\n          <!-- <img src="img/cycling.jpeg" width="200" height="200" ng-click="setSport(\'cycling\')"> -->\n          <i class="icon-cycling largeIcon whiteIcon"></i>\n          <h4 class=" whiteIcon">Cycling</h4>\n        </div>\n        <div class="col swimmingBackground" ng-click="setSport(\'swimming\')">\n          <!-- <img src="img/cycling.jpeg" width="200" height="200" ng-click="setSport(\'cycling\')"> -->\n          <i class="icon-swimming largeIcon whiteIcon"></i>\n          <h4 class=" whiteIcon">Swimming</h4>\n        </div>\n      </div>\n\n    </div>\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/availability/templates/time.html",'<ion-view>\n  <ion-content class="has-subheader">\n    <div class="text-center times">\n      <h4 class="muted">Last step</h4>\n      <h3>When can you train?</h3>\n\n      <div class="row">\n        <div ng-repeat="day in times.days" class="col">\n          <i ng-class="times.dayIcon(day)" class="createTimeIcon {{sport}}Icon" ng-click="toggle(day)"></i>\n        </div>\n      </div>\n\n       <hr>\n\n      <h4>Time of Day</h4>\n      <div class="row">\n        <div ng-repeat="time in times.times" class="col">\n          <i ng-class="times.timeIcon(time)" class="createTimeIcon {{sport}}Icon" ng-click="toggle(time)"></i>\n        </div>\n      </div>\n\n      <button class="button button-block button-{{sport | colour}}" ng-click="create()"  ng-disabled="validateTime()">\n        Find a training partner\n      </button>\n    </div>\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/notifications/templates/notifications.html",'<!-- The title of the ion-view will be shown on the navbar -->\n<ion-nav-buttons side="right">\n  <button class="button button-clear" ui-sref="activities.scheduled">\n    <i class="icon-logo headerIcon"></i>\n  </button>\n</ion-nav-buttons>\n<ion-view title="Notifications">\n\n  <ion-content>\n    <!-- The content of the page -->\n    <activity-messages messages="notifications" current-user="currentUser" show-activity="true"></activity-messages>\n\n\n    <div ng-if="notifications.length === 0" class="text-center">\n      <h1><i class="ion-android-reminder largeIcon muted"></i></h1>\n      <h2 class="muted">You have no notifications!</h2>\n      <p>Why not look for somebody near you?</p>\n      <button class="button button-twainers button-wide" ui-sref="availability.list">\n        <i class="ion-search"></i>\n        Find a Training Partner\n      </button>\n      <br><br>\n      <social-share></social-share>\n    </div>\n  </ion-content>\n</ion-view>')
}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/arbitration.html",'<h1>Arbitration Procedures</h1>\n\n<ol>\n  <li><u>Overview</u>. Arbitration is an alternative to litigation where a neutral person (the arbitrator) hears and decides the parties’ dispute. Arbitration proceedings are designed to provide parties with a fair hearing in a manner that is faster and less formal than court proceedings. The following procedures (the “Arbitration Procedures”) are applicable to all arbitration proceedings involving you and Twainers.</li>\n\n  <li><u>Pre-Arbitration Dispute Resolution</u>. Twainers is always interested in resolving disputes amicably and efficiently. So before you commence an arbitration, we suggest that you contact us to explain your complaint, as we may be able to resolve it without the need for arbitration. You may contact us at <a href="mailto:legal@twainers.com">legal@twainers.com</a>.</li>\n\n  <li><u>Administrator</u>. The administrator for the arbitration is the Irish Arbitration Association (“IAA”), an organization that is not affiliated with Twainers. The IAA facilitates, but does not itself conduct, the arbitration. The arbitrator who will hear and decide your dispute will be chosen from the IAA’s roster of neutral arbitrators. For information on the IAA, please visit its website, http://http://www.arbitrationireland.com.</li>\n\n  <li><u>Applicable Rules</u>. The arbitration will be governed by UNCITRAL Model Law. If there is any inconsistency between the UNCITRAL Model Law and these Arbitration Procedures, the Arbitration Procedures will control. However, if the arbitrator determines that strict application of the Arbitration Procedures would not result in a fundamentally fair arbitration, the arbitrator may make any order necessary to provide a fundamentally fair arbitration that is consistent with the IAA Rules.</li>\n\n  <li><u>Commencing an Arbitration</u>. To commence an arbitration against Twainers, you must contact the IAA directly. You may represent yourself in the arbitration or have a lawyer (or some other representative) act on your behalf. Upon receipt of an arbitration claim, Twainers may assert any counterclaims it may have against the complaining party.</li>\n\n  <li><u>Fees</u>. You are responsible for paying your portion of the fees set forth in the IAA’s fee schedule for consumer disputes. Twainers will pay all remaining fees. If you believe you cannot afford the IAA’s fee, you may apply to the IAA for a fee waiver.</li>\n\n  <li><u>Selection of the Arbitrator</u>. The parties, using the IAA’s standard procedures, will select a single arbitrator from a roster of neutrals prepared by the IAA.</li>\n\n  <li><u>Discovery</u>. Each party may (a) request relevant, non-privileged documents from the other party; and (b) request that the other party provide the particulars of its claims or defenses. Any such discovery requests must be served on the other party within 10 days after the arbitrator’s appointment. The responding party shall provide the requesting party with all responsive, non-privileged documents, the requested particulars, and/or any objections to the requests within 15 days after receipt of the requests. Any disputes about discovery or requests for extensions shall be submitted promptly to the arbitrator for prompt resolution. In ruling on any discovery dispute or extension request, the arbitrator shall take into consideration the nature, amount, and scope of the underlying arbitration claim, the cost and other effort what would be involved in providing the requested discovery, the case schedule, and whether the requested discovery is necessary for the adequate preparation of a claim or defense.</li>\n\n  <li><u>Communications with the Arbitrator</u>. Whenever communicating with the arbitrator, the parties must include each other – for example, by including the other party on a telephone conference call and copying the other party on any written submissions, such as letters or emails. To the extent practicable, conferences with the arbitrator will take place by telephone conference call or email. Ex parte communications are not permitted with any arbitrator.</li>\n\n  <li><u>Confidentiality</u>. Upon either party’s request, the arbitrator will issue an order requiring that confidential information of either party disclosed during the arbitration (whether in documents or orally) may not be used or disclosed except in connection with the arbitration or a proceeding to enforce the arbitration award and that any permitted filing of confidential information must be done under seal.</li>\n\n  <li><u>Arbitration Award</u>. The arbitrator will render a written decision within 14 days after the hearing or, if no hearing was held, within 30 days after any rebuttal or supplemental statements are due. The decision must clearly specify the relief, if any, awarded and contain a brief statement of the reasons for the award.</li>\n</ol>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/privacy.html",'<div class="card">\n  <h1 class="twainersFont">Privacy Policy</h1>\n  <small>Last Updated: July 10, 2014</small>\n  <br><br>\n\n  <p>Twainers Ltd. (“Twainers,” “we,” and “us”) respects the privacy of its users (“you”) and has developed this Privacy Policy to demonstrate its commitment to protecting your privacy. This Privacy Policy describes the information we collect, how that information may be used, with whom it may be shared, and your choices about such uses and disclosures. We encourage you to read this Privacy Policy carefully when using our application or services or transacting business with us. By using our website or application (our “Service”), you are accepting the practices described in this Privacy Policy.</p>\n\n  <p>If you have any questions about our privacy practices, please refer to the end of this Privacy Policy for information on how to contact us.</p>\n\n  <p><strong>Information we collect about you</strong><br>\n  In General. We may collect information that can identify you such as your name and email address ("personal information") and other information that does not identify you. We may collect this information through a website or a mobile application. By using the Service, you are authorizing us to gather, parse and retain data related to the provision of the Service.</p>\n\n  <ul>\n    <li><strong>Information you provide.</strong> In order to register as a user with Twainers, you will be asked to sign in using your Facebook login. If you do so, you authorize us to access certain Facebook account information, such as your public Facebook profile (consistent with your privacy settings in Facebook), your email address, interests, likes, gender, birthday, education history, relationship interests, current city, photos, personal description, friend list, and information about and photos of your Facebook friends who might be common Facebook friends with other Twainers users. You will also be asked to allow Twainers to collect your location information from your device when you download or use the Service. In addition, we may collect and store any personal information you provide while using our Service or in some other manner. This may include identifying information, such as your name, address, email address and telephone number, and, if you transact business with us, financial information. You may also provide us photos, a personal description and information about your gender and preferences for recommendations, such as search distance, age range and gender. If you chat with other Twainers users, you provide us the content of your chats, and if you contact us with a customer service or other inquiry, you provide us with the content of that communication.</li>\n  </ul>\n\n  <p>Use of technologies to collect information. We use various technologies to collect information from your device and about your activities on our Service.</p>\n\n  <ul>\n    <li><strong>Information collected automatically.</strong> We automatically collect information from your browser or device when you visit our Service. This information could include your IP address, device ID and type, your browser type and language, the operating system used by your device, access times, your mobile device’s geographic location while our application is actively running, and the referring website address.</li>\n\n    <li><strong>Cookies and Use of Cookie Data.</strong> When you visit our Service, we may assign your device one or more cookies to facilitate access to our Service and to personalize your experience. Through the use of a cookie, we also may automatically collect information about your activity on our Service, such as the pages you visit, the time and date of your visits and the links you click. If we advertise, we (or third parties) may use certain data collected on our Service to show you Twainers advertisements on other sites or applications.</li>\n\n    <li><strong>Other Technologies.</strong> We may use standard Internet technology, such as web beacons and other similar technologies, to track your use of our Service and to deliver or communicate with cookies. We also may include web beacons in advertisements or email messages to determine whether messages have been opened and acted upon. The information we obtain in this manner enables us to customize the services we offer users, to deliver targeted advertisements and to measure the overall effectiveness of our online advertising, content, programming or other activities.</li>\n\n    <li><strong>Information collected by third-parties for advertising purposes.</strong> We may allow service providers, advertising companies and ad networks, and other third parties to display advertisements on our Service. These companies may use tracking technologies, such as cookies or web beacons, to collect information about users who view or interact with their advertisements. We do not provide any non-anonymized personal information to third parties. Some of these third- party advertising companies may be advertising networks that are members of the Network Advertising Initiative, which offers a single location to opt out of ad targeting from member companies (www.networkadvertising.org). Opting out will not decrease the number of advertisements you see.</li>\n  </ul>\n\n  <p><strong>How we use the information we collect</strong><br>\n  <u>In General</u>. We may use information that we collect about you to:</p>\n\n  <ul>\n    <li>deliver and improve our products and services, and manage our business;</li>\n\n    <li>manage your account and provide you with customer support;</li>\n\n    <li>perform research and analysis about your use of, or interest in, our or others’ products, services, or content;</li>\n\n    <li>communicate with you by email, postal mail, telephone and/or mobile devices about products or services that may be of interest to you either from us or other third parties;</li>\n\n    <li>develop, display, and track content and advertising tailored to your interests on our Service and other sites, including providing our advertisements to you when you visit other sites;</li>\n\n    <li>website or mobile application analytics;</li>\n\n    <li>verify your eligibility and deliver prizes in connection with contests and sweepstakes;</li>\n\n    <li>enforce or exercise any rights in our Terms of Use; and</li>\n\n    <li>perform functions or services as otherwise described to you at the time of collection.</li>\n  </ul>\n\n  <p><u>Job applicants</u>. If your personal information is submitted through our website when applying for a position with our company, the information will be used solely in connection with considering and acting upon your application. We may retain your personal information, but only for the purpose of considering your application for current or future available positions. This information, which may include your name and contact information, prior education and experience, and other information you provide to us, may be shared with third-party service providers retained by us to collect, maintain and analyze candidate submissions for job postings.</p>\n\n  <p>In all circumstances, we may perform these functions directly or use a third party vendor to perform these functions on our behalf who will be obligated to use your personal information only to perform services for us. Also, if you access our Service from a third party social platform, such as Facebook, we may share non-personal information with that platform to the extent permitted by your agreement with it and its privacy settings.</p>\n\n  <p><strong>With whom we share your information</strong><br>\n  Information Shared with Other Users. When you register as a user of Twainers, your Twainers profile will be viewable by other users of the Service. Other users will be able to view information you have provided to us directly or through Facebook, such as your Facebook photos, any additional photos you upload, your first name, your age, approximate number of miles away, your personal description, and information you have in common with the person viewing your profile, such as common Facebook friends and likes. All messages added to activities are visible to the entire public.</p>\n\n  <p><u>Personal information</u>. We do not share your personal information with others except as indicated in this Privacy Policy or when we inform you and give you an opportunity to opt out of having your personal information shared. We may share personal information with:</p>\n\n  <ul>\n    <li><strong>Service providers:</strong> We may share information, including personal and financial information, with third parties that perform certain services on our behalf. These services may include fulfilling orders, providing customer service and marketing assistance, performing business and sales analysis, ad tracking and analytics, member screenings, supporting our Service functionality, and supporting contests, sweepstakes, surveys and other features offered through our Service. These service providers may have access to personal information needed to perform their functions but are not permitted to share or use such information for any other purposes.</li>\n\n    <li><strong>Other Situations.</strong> We may disclose your information, including personal information:\n    <ul>\n      <li>In response to a subpoena or similar investigative demand, a court order, or a request for cooperation from a law enforcement or other government agency; to establish or exercise our legal rights; to defend against legal claims; or as otherwise required by law. In such cases, we may raise or waive any legal objection or right available to us.</li>\n\n      <li>When we believe disclosure is appropriate in connection with efforts to investigate, prevent, or take other action regarding illegal activity, suspected fraud or other wrongdoing; to protect and defend the rights, property or safety of our company, our users, our employees, or others; to comply with applicable law or cooperate with law enforcement; or to enforce our Terms of Use or other agreements or policies.</li>\n\n      <li>In connection with a substantial corporate transaction, such as the sale of our business, a divestiture, merger, consolidation, or asset sale, or in the unlikely event of bankruptcy.</li>\n    </ul></li>\n  </ul>\n\n  <p><u>Aggregated and/or non-personal information</u>. We may use and share non-personal information we collect under any of the above circumstances. We may also share it with third parties to develop and deliver targeted advertising on our Service and on websites or applications of third parties, and to analyze and report on advertising you see. We may combine non-personal information we collect with additional non- personal information collected from other sources. We also may share aggregated, non-personal information, or personal information in hashed, non-human readable form, with third parties, including advisors, advertisers and investors, for the purpose of conducting general business analysis or other business purposes. For example, we may engage a data provider who may collect web log data from you (including IP address and information about your browser or operating system), or place or recognize a unique cookie on your browser to enable you to receive customized ads or content. The cookies may reflect de-identified demographic or other data linked to data you voluntarily have submitted to us (such as your email address), that we may share with a data provider solely in hashed, non-human readable form. To opt-out of cookies that may be set by third party data or advertising partners, please go to http:// www.aboutads.info/choices/.</p>\n\n  <p><strong>How you can access your information</strong><br>\n  If you have a Twainers account, you have the ability to review and update your personal information within the Service by opening your account and going to settings. More information about how to contact us is provided below. You also may close your account at any time by visiting the "Settings" page for your account. If you close your account, we will retain certain information associated with your account for analytical purposes and recordkeeping integrity, as well as to prevent fraud, enforce our Terms of Use, take actions we deem necessary to protect the integrity of our Service or our users, or take other actions otherwise permitted by law. In addition, if certain information has already been provided to third parties as described in this Privacy Policy, retention of that information will be subject to those third parties\' policies.</p>\n\n  <p><strong>Your choices about collection and use of your information</strong></p>\n  <ul>\n    <li>You can choose not to provide us with certain information, but that may result in you being unable to use certain features of our Service because such information may be required in order for you to register as user; purchase products or services; participate in a contest, promotion, survey, or sweepstakes; ask a question; or initiate other transactions.</li>\n\n    <li>Our Service may also deliver notifications to your phone or mobile device. You can disable these notifications by deleting the relevant Service or by changing the settings on your mobile device.</li>\n\n    <li>You can also control information collected by cookies. You can delete or decline cookies by changing your browser settings. Click “help” in the toolbar of most browsers for instructions.</li>\n  </ul>\n\n  <p><strong>How we protect your personal information</strong><br>\n  We take security measures to help safeguard your personal information from unauthorized access and disclosure. However, no system can be completely secure. Therefore, although we take steps to secure your information, we do not promise, and you should not expect, that your personal information, chats, or other communications will always remain secure. Users should also take care with how they handle and disclose their personal information and should avoid sending personal information through insecure email. Please refer to the U.S. Federal Trade Commission\'s website at http://www.ftc.gov/bcp/menus/consumer/data.shtm for information about how to protect yourself against identity theft.</p>\n\n  <p><strong>Information you provide about yourself while using our Service</strong><br>\n  We provide areas on our Service where you can post information about yourself and others and communicate with others. Such postings are governed by our Terms of Use . Also, whenever you voluntarily disclose personal information on publicly-viewable pages, that information will be publicly available and can be collected and used by others. For example, if you post your email address, you may receive unsolicited messages. We cannot control who reads your posting or what other users may do with the information you voluntarily post, so we encourage you to exercise discretion and caution with respect to your personal information.</p>\n\n  <p><strong>Children\'s privacy</strong><br>\n  Although our Service is a general audience Service, we restrict the use of our service to individuals age 13 and above. We do not knowingly collect, maintain, or use personal information from children under the age of 13.</p>\n\n  <p><strong>Visiting our Service from outside the Republic of Ireland</strong><br>\n  If you are visiting our Service from outside the Republic of Ireland, please be aware that your information may be transferred to, stored, and processed in the Republic of Ireland and globally where our servers are located and our central database is operated. By using our services, you understand and agree that your information may be transferred to our facilities and those third parties with whom we share it as described in this privacy policy.</p>\n\n  <p><strong>No Rights of Third Parties</strong><br>\n  This Privacy Policy does not create rights enforceable by third parties or require disclosure of any personal information relating to users of the website.</p>\n\n  <p><strong>Changes to this Privacy Policy</strong><br>\n  We will occasionally update this Privacy Policy. When we post changes to this Privacy Policy, we will revise the "last updated" date at the top of this Privacy Policy. We recommend that you check our Service from time to time to inform yourself of any changes in this Privacy Policy or any of our other policies.</p>\n\n  <p><strong>How to contact us</strong><br>\n  If you have any questions about this Privacy Policy, please contact us by email at <a href="mailto:help@twainers.com">help@twainers.com</a></p>\n</div>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/profile.html",'<ion-view title="<i class=\'ion-android-person\'></i> Profile">\n  <ion-content>\n\n\n\n\n    <ul class="list">\n      <div class="item item-divider">\n        About You\n      </div>\n\n\n      <label class="item item-input">\n        <textarea placeholder="Let pepople know who you are" ng-model="blurb" rows="5" ng-maxlength="140"></textarea>\n      </label>\n      <p class="muted">Remaining Characters: {{140 - blurb.length}}</p>\n\n    </ul>\n    <button class="button button-block button-twainers" ng-click="updateBlurb()">Update</button>\n  </ion-content>\n</ion-view>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/safety.html",'<div class="card">\n  <h1 class="twainersFont">Safety</h1>\n\n  <p>The safety of our users is very important to us. There are steps that everyone can follow to ensure their safety while using Twainers. Please take a few minutes to read these tips.</p>\n\n  <p><strong>Keep your financial information private</strong><br>\n  Ignore any request to send money – even if the person claims to be in an emergency – and report it to us immediately. Never give out financial information such as you social security number, credit card number or bank information.</p>\n\n  <p><strong>Keep your personal information</strong><br>\n  You are in control of your Twainers experience at all times – remain anonymous until you feel ready. Be careful about sharing personal information, such as your phone number, email and address. Protect your identity until you are comfortable enough with someone to share it. Also, leave any personal contact information out of your Twainers profile.</p>\n\n  <p>Note: Twainers will never send you an email asking for your username and password information. Any such communication should be reported immediately.</p>\n\n  <p><strong>Spam/Scammers There are red flags to watch out for that may indicate you\'re dealing with a scammer. Be aware of anyone who:</strong><br>\n  Sends you messages containing links to third-party websites<br>\n  Quickly asks to talk or chat on an outside of Twainers<br>\n  Asks you for money<br>\n  Vanishes mysteriously then reappears under a different name<br>\n  Asks for your address under the guise of sending flowers or gifts<br>\n  The U.S. Federal Trade Commission\'s advice to avoid online scams is available <a href="http://onguardonline.gov/articles/0004-online-dating-scams">here</a></p>\n\n  <p><strong>Report suspicious users Please report anyone who violates our terms of use. Examples of terms of use violations include:</strong><br>\n  Asking you for money or donations<br>\n  Anyone that looks like they could be under the age of 13<br>\n  Users sending harassing or offensive messages<br>\n  Users behaving inappropriately after meeting in person<br>\n  Fraudulent profiles<br>\n  Spam or solicitation, such as attempts to sell products or services</p>\n\n\n  <h2>Meeting In Person</h2>\n  <p>First meetings are exciting, but always take precautions and follow these guidelines to help you stay safe:</p>\n\n  <p><strong>Get to know the other person before meeting them offline</strong><br>\n  Get to know someone through chat before disclosing personal information or meeting in person. We don\'t conduct criminal background checks on our users, so it’s up to you to do your own research and remain cautious.</p>\n\n  <p><strong>Always meet in public</strong><br>\n  Meet for the first time in a populated, public place – never in a private or remote location, and never at your home or apartment.</p>\n\n  <p><strong>Agree on your route before you start</strong><br>\n  Make sure that you have an agreed route before starting. You need to make sure that you are comfortable with the area\'s that you will be training in.</p>\n\n  <p><strong>Tell a friend Inform a friend or family member of your plans.</strong><br>\n  Tell them who you are meeting, where you are going and when you will return. Bring your phone with you.</p>\n\n  <p><strong>Drive yourself to and from the first meeting</strong><br>\n  Be in control of your own ride – even if you take a taxi. Securing your own ride is important. Even if the person you\'re meeting volunteers to pick you up, do not get into a vehicle with someone you don’t know and trust, especially if it’s the first meeting.</p>\n\n\n  <p>Following these guideline will help keep Twainers safe and enjoyable.</p>\n</div>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/settings.html",'<ion-view title="<i class=\'ion-gear-a\'></i> App Settings">\n  <ion-content>\n    <ul class="list">\n      <div class="item item-divider">\n        Email Notifications\n      </div>\n\n      <ion-toggle ng-model="notifications.request" toggle-class="toggle-calm" ng-click="updateSettings({notifications: notifications})">Activity Requested / Confirmed</ion-toggle>\n      <ion-toggle ng-model="notifications.message" toggle-class="toggle-calm" ng-click="updateSettings({notifications: notifications})">New Message on Activity</ion-toggle>\n      <ion-toggle ng-model="notifications.feedback" toggle-class="toggle-calm" ng-click="updateSettings({notifications: notifications})">Feedback Request</ion-toggle>\n      <ion-toggle ng-model="notifications.join" toggle-class="toggle-calm" ng-click="updateSettings({notifications: notifications})">Twainee joined an Activity</ion-toggle>\n      <ion-toggle ng-model="notifications.leave" toggle-class="toggle-calm" ng-click="updateSettings({notifications: notifications})">Twainee left an Activity</ion-toggle>\n\n      <div class="item item-divider">\n        Distance Measurement\n      </div>\n      <div class="button-bar">\n        <a class="button" ng-class="{\'button-calm\': metric, \'button-clear\': !metric}" ng-click="setMetric(true)">Km</a>\n        <a class="button" ng-class="{\'button-calm\': !metric, \'button-clear\': metric}" ng-click="setMetric(false)">Mi</a>\n      </div>\n    </ul>\n  </ion-content>\n</ion-view>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/terms.html",'<div class="card">\n    <h1 class="twainersFont">Terms of Use</h1>\n    <small>Last Updated: July 10, 2014</small>\n    <br><br>\n\n    <p>Welcome to Twainers, operated by Twainers Ltd. (the "<strong>Company</strong>" or "<strong>Twainers</strong>").</p>\n\n    <p>By accessing the Twainers application or its website found at www.twainers.com, whether through a mobile device, mobile application or computer (collectively, the "<strong>Service</strong>") you agree to be bound by these Terms of Use (this "<strong>Agreement</strong>"), whether or not you create a Twainers account. If you wish to create a Twainers account and make use of the Service, please read these Terms of Use.</p>\n\n    You should also read the Twainers Privacy Policy, which is incorporated by reference into this Agreement and available in the Service. If you do not accept and agree to be bound by all of the terms of this Agreement, including the Twainers Privacy Policy, do not use the Service. Please contact us with any questions regarding this Agreement.\n\n    <ol class="ol">\n\n      <li><strong>Acceptance of Terms of Use Agreement.</strong></li>\n\n      <ol class="ol">\n\n        <li>This Agreement is an electronic contract that establishes the legally binding terms you must accept to use the Service. This Agreement includes the Company’s (i) Privacy Policy, (ii) our Safety Tips and (iii) terms disclosed and agreed to by you if you purchase or accept additional features, products or services we offer on the Service, such as terms governing features, billing, free trials, discounts and promotions.</li>\n\n        <li>By accessing or using the Service, you accept this Agreement and agree to the terms, conditions and notices contained or referenced herein and consent to have this Agreement and all notices provided to you in electronic form. To withdraw this consent, you must cease using the Service and terminate your account. Please print a copy of this Agreement for your records. To receive a non- electronic copy of this Agreement, please contact us at <a href="mailto:help@twainers.com">help@twainers.com</a>. This Agreement may be modified by the Company from time to time, such modifications to be effective upon posting by the Company in the Service.</li>\n      </ol>\n\n\n      <li><strong>Eligibility.</strong> No part of Twainers is directed to persons under the age of 13. You must be at least 13 years of age to access and use the Service. Any use of the Service is void where prohibited. By accessing and using the Service, you represent and warrant that you have the right, authority and capacity to enter into this Agreement and to abide by all of the terms and conditions of this Agreement. If you create an account, you represent and warrant that you have never been convicted of assault and that you are not required to register as a sex offender with any government entity. Using the Service may be prohibited or restricted in certain countries. If you use the Service from outside of the Republic of Ireland, you are responsible for complying with the laws and regulations of the territory from which you access or use the Service.</li>\n\n      <li><strong>Creating an Account.</strong> In order to use Twainers, you must sign in using your Facebook login. If you do so, you authorize us to access and use certain Facebook account information, including but not limited to your public Facebook profile and information about Facebook friends you might share in common with other Twainers users. For more information regarding the information we collect from you and how we use it, please consult our Privacy Policy.</li>\n\n      <li><strong>Term and Termination.</strong> This Agreement will remain in full force and effect while you use the Service and/or have a Twainers account. You may disable your account at any time, for any reason, by following the instructions in "Settings" in the Service. The Company may terminate or suspend your account at any time without notice if the Company believes that you have breached this Agreement, or for any other reason, with or without cause, in its sole discretion. Upon such termination or suspension, you will not be entitled to any refund of unused fees for in app purchases. The Company is not required to disclose, and may be prohibited by law from disclosing, the reason for the termination or suspension of your account. After your account is terminated for any reason, all terms of this Agreement survive such termination, and continue in full force and effect, except for any terms that by their nature expire or are fully satisfied.</li>\n\n      <li><strong>Non-commercial Use by Users.</strong> The Service is for personal use only. Users may not use the Service or any content contained in the Service (including, but not limited to, content of other users, designs, text, graphics, images, video, information, logos, software, audio files and computer code) in connection with any commercial endeavors, such as (i) advertising or soliciting any user to buy or sell any products or services not offered by the Company or (ii) soliciting others to attend training sessions for commercial purposes. Users of the Service may not use any information obtained from the Service to contact, advertise to, solicit, or sell to any other user without his or her prior explicit consent. Organizations, companies, and/or businesses may not use the Service or the Service for any purpose. The Company may investigate and take any available legal action in response to illegal and/or unauthorized uses of the Service, including collecting usernames and/or email addresses of users by electronic or other means for the purpose of sending unsolicited email and unauthorized framing of or linking to the Service.</li>\n\n      <li><strong>Account Security.</strong> You are responsible for maintaining the confidentiality of the username and password you designate during the registration process, and you are solely responsible for all activities that occur under your username and password. You agree to immediately notify the Company of any disclosure or unauthorized use of your username or password or any other breach of security at help@twainers.com and ensure that you log out from your account at the end of each session.</li>\n\n      <li><strong>Your Interactions with Other Users.</strong></li>\n\n      <ol class="ol">\n        <li><strong>YOU ARE SOLELY RESPONSIBLE FOR YOUR INTERACTIONS WITH OTHER USERS. YOU UNDERSTAND THAT THE COMPANY CURRENTLY DOES NOT CONDUCT CRIMINAL BACKGROUND CHECKS OR SCREENINGS ON ITS USERS. THE COMPANY ALSO DOES NOT INQUIRE INTO THE BACKGROUNDS OF ALL OF ITS USERS OR ATTEMPT TO VERIFY THE STATEMENTS OF ITS USERS. THE COMPANY MAKES NO REPRESENTATIONS OR WARRANTIES AS TO THE CONDUCT OF USERS OR THEIR COMPATIBILITY WITH ANY CURRENT OR FUTURE USERS. THE COMPANY RESERVES THE RIGHT TO CONDUCT ANY CRIMINAL BACKGROUND CHECK OR OTHER SCREENINGS (SUCH AS SEX OFFENDER REGISTER SEARCHES), AT ANY TIME AND USING AVAILABLE PUBLIC RECORDS.</strong></li>\n\n        <li><strong>The Company is not responsible for the conduct of any user. As noted in and without limiting Sections 14 and 16 below, in no event shall the Company, its affiliates or its partners be liable (directly or indirectly) for any losses or damages whatsoever, whether direct, indirect, general, special, compensatory, consequential, and/or incidental, arising out of or relating to the conduct of you or anyone else in connection with the use of the Service including, without limitation, death, bodily injury, emotional distress, and/or any other damages resulting from communications or meetings with other users or persons you meet through the Service</strong>. You agree to take all necessary precautions in all interactions with other users, particularly if you decide to communicate off the Service or meet in person, or if you decide to send money to another user. <strong>In addition, you agree to review and follow the Company\'s <a ui.sref="terms.safety">Safety Tips</a>, located in the Service, prior to using the Service</strong>. You understand that the Company makes no guarantees, either express or implied, regarding your ultimate compatibility with individuals you meet through the Service. You should not provide your financial information (for example, your credit card or bank account information), or wire or otherwise send money, to other users.</li>\n      </ol>\n\n      <li><strong>Proprietary Rights.</strong> The Company owns and retains all proprietary rights in the Service, and in all content, trademarks, trade names, service marks and other intellectual property rights related thereto. The Service contains the copyrighted material, trademarks, and other proprietary information of the Company and its licensors. You agree to not copy, modify, transmit, create any derivative works from, make use of, or reproduce in any way any copyrighted material, trademarks, trade names, service marks, or other intellectual property or proprietary information accessible through the Service, without first obtaining the prior written consent of the Company or, if such property is not owned by the Company, the owner of such intellectual property or proprietary rights. You agree to not remove, obscure or otherwise alter any proprietary notices appearing on any content, including copyright, trademark and other intellectual property notices.</li>\n\n      <li><strong>Content Posted by You in the Service.</strong></li>\n\n      <ol class="ol">\n        <li>You are solely responsible for the content and information that you post, upload, publish, link to, transmit, record, display or otherwise make available (hereinafter, "<strong>post</strong>") on the Service or transmit to other users, including text messages, chat, videos (including streaming videos), photographs, or profile text, whether publicly posted or privately transmitted (collectively, "<strong>Content</strong>"). You may not post as part of the Service, or transmit to the Company or any other user (either on or off the Service), any offensive, inaccurate, incomplete, abusive, obscene, profane, threatening, intimidating, harassing, racially offensive, or illegal material, or any material that infringes or violates another person’s rights (including intellectual property rights, and rights of privacy and publicity). You represent and warrant that (i) all information that you submit upon creation of your account, including information submitted from your Facebook account, is accurate and truthful and that you will promptly update any information provided by you that subsequently becomes inaccurate, incomplete, misleading or false and (ii) you have the right to post the Content on the Service and grant the licenses set forth below.</li>\n\n        <li>You understand and agree that the Company may, but is not obligated to, monitor or review any Content you post as part of a Service. The Company may delete any Content, in whole or in part, that in the sole judgment of the Company violates this Agreement or may harm the reputation of the Service or the Company.</li>\n\n        <li>By posting Content as part of the Service, you automatically grant to the Company, its affiliates, licensees and successors, an irrevocable, perpetual, non- exclusive, transferable, sub-licensable, fully paid-up, worldwide right and license to (i) use, copy, store, perform, display, reproduce, record, play, adapt, modify and distribute the Content, (ii) prepare derivative works of the Content or incorporate the Content into other works, and (iii) grant and authorize sublicenses of the foregoing in any media now known or hereafter created. You represent and warrant that any posting and use of your Content by the Company will not infringe or violate the rights of any third party.</li>\n\n        <li>In addition to the types of Content described in Section 9(a) above, the following is a partial list of the kind of Content that is prohibited in the Service. You may not post, upload, display or otherwise make available Content that:\n\n        <ul class="ul">\n          <li>that promotes racism, bigotry, hatred or physical harm of any kind against any group or individual;</li>\n\n          <li>advocates harassment or intimidation of another person;</li>\n\n          <li>requests money from, or is intended to otherwise defraud, other users of the Service;</li>\n\n          <li>involves the transmission of "junk mail", "chain letters," or unsolicited mass mailing or "spamming" (or "spimming", "phishing", "trolling" or similar activities);</li>\n\n          <li>promotes information that is false or misleading, or promotes illegal activities or conduct that is defamatory, libelous or otherwise objectionable;</li>\n\n          <li>promotes an illegal or unauthorized copy of another person’s copyrighted work, such as providing pirated computer programs or links to them, providing information to circumvent manufacture- installed copy-protect devices, or providing pirated images, audio or video, or links to pirated images, audio or video files;</li>\n\n          <li>contains video, audio photographs, or images of another person without his or her permission (or in the case of a minor, the minor’s legal guardian);</li>\n\n          <li>contains restricted or password only access pages, or hidden pages or images (those not linked to or from another accessible page);</li>\n\n          <li>provides material that exploits people in a sexual, violent or other illegal manner, or solicits personal information from anyone under the age of 18;</li>\n\n          <li>provides instructional information about illegal activities such as making or buying illegal weapons or drugs, violating someone’s privacy, or providing, disseminating or creating computer viruses;</li>\n\n          <li>contains viruses, time bombs, trojan horses, cancelbots, worms or other harmful, or disruptive codes, components or devices;</li>\n\n          <li>impersonates, or otherwise misrepresents affiliation, connection or association with, any person or entity;</li>\n\n          <li>provides information or data you do not have a right to make available under law or under contractual or fiduciary relationships (such as inside information, proprietary and confidential information);</li>\n\n          <li>disrupts the normal flow of dialogue, causes a screen to "scroll" faster than other users are able to type, or otherwise negatively affects other users’ ability to engage in real time exchanges;</li>\n\n          <li>solicits passwords or personal identifying information for commercial or unlawful purposes from other users or disseminates another person’s personal information without his or her permission; and</li>\n\n          <li>publicizes or promotes commercial activities and/or sales without our prior written consent such as contests, sweepstakes, barter, advertising, and pyramid schemes.</li>\n        </ul>\n\n        The Company reserves the right, in its sole discretion, to investigate and take any legal action against anyone who violates this provision, including removing the offending communication from the Service and terminating or suspending the account of such violators.</li>\n\n        <li>Your use of the Service, including all Content you post through the Service, must comply with all applicable laws and regulations. You agree that the Company may access, preserve and disclose your account information and Content if required to do so by law or in a good faith belief that such access, preservation or disclosure is reasonably necessary, such as to: (i) comply with legal process; (ii) enforce this Agreement; (iii) respond to claims that any Content violates the rights of third parties; (iv) respond to your requests for customer service or allow you to use the Service in the future; or (v) protect the rights, property or personal safety of the Company or any other person.</li>\n\n        <li>You agree that any Content you place on the Service may be viewed by other users and may be viewed by any person visiting or participating in the Service.</li>\n      </ol>\n\n      <li><strong>Prohibited Activities.</strong> The Company reserves the right to investigate, suspend and/or terminate your account if you have misused the Service or behaved in a way the Company regards as inappropriate or unlawful, including actions or communications the occur off the Service but involve users you meet through the Service. The following is a partial list of the type of actions that you may not engage in with respect to the Service. You will not:\n\n      <ul class="ul">\n        <li>impersonate any person or entity.</li>\n\n        <li>solicit money from any users.</li>\n\n        <li>post any Content that is prohibited by Section 9.</li>\n\n        <li>"stalk" or otherwise harass any person.</li>\n\n        <li>express or imply that any statements you make are endorsed by the Company without our specific prior written consent.</li>\n\n        <li>use the Service in an illegal manner or to commit an illegal act;</li>\n\n        <li>access the Service in a jurisdiction in which it is illegal or unauthorized;</li>\n\n        <li>ask or use users to conceal the identity, source, or destination of any illegally gained money or products.</li>\n\n        <li>use any robot, spider, site search/retrieval application, or other manual or automatic device or process to retrieve, index, "data mine", or in any way reproduce or circumvent the navigational structure or presentation of the Service or its contents.</li>\n\n        <li>collect usernames and/or email addresses of users by electronic or other means for the purpose of sending unsolicited email or unauthorized framing of or linking to the Service.</li>\n\n        <li>interfere with or disrupt the Service or the servers or networks connected to the Service.</li>\n\n        <li>email or otherwise transmit any material that contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment.</li>\n\n        <li>forge headers or otherwise manipulate identifiers in order to disguise the origin of any information transmitted to or through the Service (either directly or indirectly through use of third party software).</li>\n\n        <li>"frame" or "mirror" any part of the Service, without the Company\'s prior written authorization.</li>\n\n        <li>use meta tags or code or other devices containing any reference to the Company or the Service (or any trademark, trade name, service mark, logo or slogan of the Company) to direct any person to any other website for any purpose.</li>\n\n        <li>modify, adapt, sublicense, translate, sell, reverse engineer, decipher, decompile or otherwise disassemble any portion of the Service any software used on or for the Service, or cause others to do so.</li>\n\n        <li>post, use, transmit or distribute, directly or indirectly, (e.g. screen scrape) in any manner or media any content or information obtained from the Service other than solely in connection with your use of the Service in accordance with this Agreement.</li>\n      </ul></li>\n\n      <li><strong>Customer Service.</strong> The Company provides assistance and guidance through its customer care representatives. When communicating with our customer care representatives, you agree to not be abusive, obscene, profane, offensive, sexist, threatening, harassing, racially offensive, or to not otherwise behave inappropriately. If we feel that your behavior towards any of our customer care representatives or other employees is at any time threatening or offensive, we reserve the right to immediately terminate your account.</li>\n\n      <li><strong>Modifications to Service.</strong> The Company reserves the right at any time to modify or discontinue, temporarily or permanently, the Service (or any part thereof) with or without notice. You agree that the Company shall not be liable to you or to any third party for any modification, suspension or discontinuance of the Service. To protect the integrity of the Service, the Company reserves the right at any time in its sole discretion to block users from certain IP addresses from accessing the Service.</li>\n\n      <li><strong>Copyright Policy; Notice and Procedure for Making Claims of Copyright Infringement.</strong> You may not post, distribute, or reproduce in any way any copyrighted material, trademarks, or other proprietary information without obtaining the prior written consent of the owner of such proprietary rights. Without limiting the foregoing, if you believe that your work has been copied and posted on the Service in a way that constitutes copyright infringement, please provide our Copyright Agent with the following information:\n\n      <ul class="ul">\n        <li>an electronic or physical signature of the person authorized to act on behalf of the owner of the copyright interest;</li>\n\n        <li>a description of the copyrighted work that you claim has been infringed;</li>\n\n        <li>a description of where the material that you claim is infringing is located on the Service (and such description must be reasonably sufficient to enable the Company to find the alleged infringing material, such as a url);</li>\n\n        <li>your address, telephone number and email address;</li>\n\n        <li>a written statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law; and</li>\n\n        <li>a statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner\'s behalf.</li>\n      </ul>\n\n      Notice of claims of copyright infringement should be provided to the Company’s Copyright Agent at <a href="mailto:copyright@twainers.com">copyright@twainers.com</a>.\n\n      The Company will terminate the accounts of repeat infringers.</li>\n\n      <li><strong>Disclaimers.</strong>\n\n      <ol class="ol">\n        <li>You acknowledge and agree that neither the Company nor its affiliates and third party partners are responsible for and shall not have any liability, directly or indirectly, for any loss or damage, including personal injury or death, as a result of or alleged to be the result of (i) any incorrect or inaccurate Content posted in the Service, whether caused by users or any of the equipment or programming associated with or utilized in the Service; (ii) the timeliness, deletion or removal, incorrect delivery or failure to store any Content, communications or personalization settings; (iii) the conduct, whether online or offline, of any user; (iv) any error, omission or defect in, interruption, deletion, alteration, delay in operation or transmission, theft or destruction of, or unauthorized access to, any user or user communications; or (v) any problems, failure or technical malfunction of any telephone network or lines, computer online systems, servers or providers, computer equipment, software, failure of email or players on account of technical problems or traffic congestion on the Internet or at any website or combination thereof, including injury or damage to users or to any other person’s computer or device related to or resulting from participating or downloading materials in connection with the Internet and/or in connection with the Service. <strong>TO THE MAXIMUM EXTENT ALLOWED BY APPLICABLE LAW, THE COMPANY PROVIDES THE SERVICE ON AN "AS IS" AND "AS AVAILABLE" BASIS AND GRANTS NO WARRANTIES OF ANY KIND, WHETHER EXPRESS, IMPLIED, STATUTORY OR OTHERWISE WITH RESPECT TO THE SERVICE (INCLUDING ALL CONTENT CONTAINED THEREIN), INCLUDING (WITHOUT LIMITATION) ANY IMPLIED WARRANTIES OF SATISFACTORY QUALITY, MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT. THE COMPANY DOES NOT REPRESENT OR WARRANT THAT THE SERVICE WILL BE UNINTERRUPTED OR ERROR FREE, SECURE OR THAT ANY DEFECTS OR ERRORS IN THE SERVICE WILL BE CORRECTED.</strong></li>\n\n        <li>ANY MATERIAL DOWNLOADED OR OTHERWISE OBTAINED THROUGH THE USE OF THE SERVICE IS ACCESSED AT YOUR OWN DISCRETION AND RISK, AND YOU WILL BE SOLELY RESPONSIBLE FOR AND HEREBY WAIVE ANY AND ALL CLAIMS AND CAUSES OF ACTION WITH RESPECT TO ANY DAMAGE TO YOUR DEVICE, COMPUTER SYSTEM, INTERNET ACCESS, DOWNLOAD OR DISPLAY DEVICE, OR LOSS OR CORRUPTION OF DATA THAT RESULTS OR MAY RESULT FROM THE DOWNLOAD OF ANY SUCH MATERIAL. IF YOU DO NOT ACCEPT THIS LIMITATION OF LIABILITY, YOU ARE NOT AUTHORIZED TO DOWNLOAD OR OBTAIN ANY MATERIAL THROUGH THE SERVICE.</li>\n\n        <li>From time to time, the Company may make third party opinions, advice, statements, offers, or other third party information or content available through the Service. All third party content is the responsibility of the respective authors thereof and should not necessarily be relied upon. Such third party authors are solely responsible for such content. THE COMPANY DOES NOT: (I) GUARANTEE THE ACCURACY, COMPLETENESS, OR USEFULNESS OF ANY THIRD PARTY CONTENT PROVIDED THROUGH THE SERVICE, OR (II) ADOPT, ENDORSE OR ACCEPT RESPONSIBILITY FOR THE ACCURACY OR RELIABILITY OF ANY OPINION, ADVICE, OR STATEMENT MADE BY ANY PARTY THAT APPEARS IN THE SERVICE. UNDER NO CIRCUMSTANCES WILL THE COMPANY OR ITS AFFILIATES BE RESPONSIBLE OR LIABLE FOR ANY LOSS OR DAMAGE RESULTING FROM YOUR RELIANCE ON INFORMATION OR OTHER CONTENT POSTED IN THE SERVICE, OR TRANSMITTED TO OR BY ANY USERS.</li>\n\n        <li>In addition to the preceding paragraph and other provisions of this Agreement, any advice that may be posted in the Service is for informational and entertainment purposes only and is not intended to replace or substitute for any professional financial, medical, legal, or other advice. The Company makes no representations or warranties and expressly disclaims any and all liability concerning any treatment, action by, or effect on any person following the information offered or provided within or through the Service. If you have specific concerns or a situation arises in which you require professional or medical advice, you should consult with an appropriately trained and qualified specialist.</li>\n      </ol></li>\n\n      <li><strong>Links.</strong> The Service may contain, and the Service or third parties may provide, advertisements and promotions offered by third parties and links to other web sites or resources. You acknowledge and agree that the Company is not responsible for the availability of such external websites or resources, and does not endorse and is not responsible or liable for any content, information, statements, advertising, goods or services, or other materials on or available from such websites or resources. Your correspondence or business dealings with, or participation in promotions of, third parties found in or through the Service, including payment and delivery of related goods or services, and any other terms, conditions, warranties or representations associated with such dealings, are solely between you and such third party. You further acknowledge and agree that the Company shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with the use of, or reliance upon, any such content, information, statements, advertising, goods or services or other materials available on or through any such website or resource.</li>\n\n      <li><strong>Limitation on Liability. TO THE FULLEST EXTENT ALLOWED BY APPLICABLE LAW, IN NO EVENT WILL THE COMPANY, ITS AFFILIATES, BUSINESS PARTNERS, LICENSORS OR SERVICE PROVIDERS BE LIABLE TO YOU OR ANY THIRD PERSON FOR ANY INDIRECT, RELIANCE, CONSEQUENTIAL, EXEMPLARY, INCIDENTAL, SPECIAL OR PUNITIVE DAMAGES, INCLUDING, WITHOUT LIMITATION, LOSS OF PROFITS, LOSS OF GOODWILL, DAMAGES FOR LOSS, CORRUPTION OR BREACHES OF DATA OR PROGRAMS, SERVICE INTERRUPTIONS AND PROCUREMENT OF SUBSTITUTE SERVICES, EVEN IF THE COMPANY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. NOTWITHSTANDING ANYTHING TO THE CONTRARY CONTAINED HEREIN, THE COMPANY\'S LIABILITY TO YOU FOR ANY CAUSE WHATSOEVER, AND REGARDLESS OF THE FORM OF THE ACTION, WILL AT ALL TIMES BE LIMITED TO THE AMOUNT PAID, IF ANY, BY YOU TO THE COMPANY FOR THE SERVICE WHILE YOU HAVE AN ACCOUNT. YOU AGREE THAT REGARDLESS OF ANY STATUTE OR LAW TO THE CONTRARY, ANY CLAIM OR CAUSE OF ACTION ARISING OUT OF OR RELATED TO USE OF THE SERVICE OR THE TERMS OF THIS AGREEMENT MUST BE FILED WITHIN ONE YEAR AFTER SUCH CLAIM OR CAUSE OF ACTION AROSE OR BE FOREVER BARRED.</strong></li>\n\n      <li><strong>Arbitration and Governing Law.</strong>\n      <ol class="ol">\n        <li>The exclusive means of resolving any dispute or claim arising out of or relating to this Agreement (including any alleged breach thereof) or the Service shall be <strong>BINDING ARBITRATION</strong> administered by the Irish Arbitration Association. The one exception to the exclusivity of arbitration is that you have the right to bring an individual claim against the Company in a small-claims court of competent jurisdiction. But whether you choose arbitration or small-claims court, you may not under any circumstances commence or maintain against the Company any class action, class arbitration, or other representative action or proceeding.</li>\n\n        <li>By using the Service in any manner, you agree to the above arbitration agreement. In doing so, <strong>YOU GIVE UP YOUR RIGHT TO GO TO COURT</strong> to assert or defend any claims between you and the Company (except for matters that may be taken to small-claims court). <strong>YOU ALSO GIVE UP YOUR RIGHT TO PARTICIPATE IN A CLASS ACTION OR OTHER CLASS PROCEEDING.</strong> Your rights will be determined by a <strong>NEUTRAL ARBITRATOR, NOT A JUDGE OR JURY.</strong> You are entitled to a fair hearing before the arbitrator. The arbitrator can grant any relief that a court can, but you should note that arbitration proceedings are usually simpler and more streamlined than trials and other judicial proceedings. Decisions by the arbitrator are enforceable in court and may be overturned by a court only for very limited reasons. For details on the arbitration process, see our Arbitration Procedures.</li>\n\n        <li>Any proceeding to enforce this arbitration agreement, including any proceeding to confirm, modify, or vacate an arbitration award, may be commenced in any court of competent jurisdiction. In the event that this arbitration agreement is for any reason held to be unenforceable, any litigation against the Company (except for small-claims court actions) may be commenced only in the federal or state courts located in Dallas County, Texas. You hereby irrevocably consent to the jurisdiction of those courts for such purposes.</li>\n\n        <li>This Agreement, and any dispute between you and the Company, shall be governed by the laws of the state of Texas without regard to principles of conflicts of law, provided that this arbitration agreement shall be governed by the Federal Arbitration Act.</li>\n\n        <li>Details about arbitration procedures can be found at twainers.com/terms/arbitration</li>\n      </ol></li>\n\n      <li><strong>Indemnity by You.</strong> You agree to indemnify and hold the Company, its subsidiaries, and affiliates, and its and their officers, agents, partners and employees, harmless from any loss, liability, claim, or demand, including reasonable attorney\'s fees, made by any third party due to or arising out of your breach of or failure to comply with this Agreement (including any breach of your representations and warranties contained herein), any postings or Content you post in the Service, and the violation of any law or regulation by you. The Company reserves the right to assume the exclusive defense and control of any matter otherwise subject to indemnification by you, in which event you will fully cooperate with the Company in connection therewith.</li>\n\n      <li><strong>Notice.</strong> The Company may provide you with notices, including those regarding changes to this Agreement, using any reasonable means now known or hereafter developed, including by email, regular mail, SMS, MMS, text message or postings in the Service. Such notices may not be received if you violate this Agreement by accessing the Service in an unauthorized manner. You agree that you are deemed to have received any and all notices that would have been delivered had you accessed the Service in an authorized manner.</li>\n\n      <li><strong>Entire Agreement; Other.</strong> This Agreement, with the Privacy Policy and any specific guidelines or rules that are separately posted for particular services or offers in the Service, contains the entire agreement between you and the Company regarding the use of the Service. If any provision of this Agreement is held invalid, the remainder of this Agreement shall continue in full force and effect. The failure of the Company to exercise or enforce any right or provision of this Agreement shall not constitute a waiver of such right or provision. You agree that your online account is non-transferable and all of your rights to your profile or contents within your account terminate upon your death. No agency, partnership, joint venture or employment is created as a result of this Agreement and you may not make any representations or bind the Company in any manner.</li>\n\n      <li><strong>Amendment.</strong> This Agreement is subject to change by the Company at any time.</li>\n    </ol>\n  </div>')
}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/termsMain.html","<ion-view title=\"<i class='ion-ios7-paper-outline'></i> Terms\">\n  <ion-content>\n    <ion-nav-view>\n\n    </ion-nav-view>\n  </ion-content>\n</ion-view>")}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/profile/templates/termsMenu.html",'<a ui-sref="terms.terms" class="item item-icon-left">\n  <!-- <i class="icon ion-ios7-person muted"></i> -->\n  <strong class="twainersFont">Terms and Condtions</strong><br>\n</a>\n\n<a ui-sref="terms.privacy" class="item item-icon-left">\n  <!-- <i class="icon ion-gear-a muted"></i> -->\n  <strong class="twainersFont">Privacy Policy</strong><br>\n</a>\n\n<a ui-sref="terms.safety" class="item item-icon-left">\n  <!-- <i class="icon ion-ios7-paper-outline muted"></i> -->\n  <strong class="twainersFont">Safety Policy</strong><br>\n</a>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/directives/templates/activityMessages.html",'\n<div ng-show="messagesExist()">\n  <div ng-repeat="message in messages" ng-class="{\'unread\': !message.attributes.read && state.includes(\'notifications\')}" ng-click="goToActivity(message.attributes.activity)" class="card list">\n\n\n    <!-- NOT FEEDBACK -->\n    <div class="item item-avatar">\n      <img ng-src="https://graph.facebook.com/{{message.attributes.sender.attributes.profileId}}/picture?type=square" ng-if="message.attributes.sender">\n      <img ng-src="https://graph.facebook.com/{{message.attributes.feedback.attributes.reviewer.attributes.profileId}}/picture?type=square" ng-if="message.attributes.feedback">\n      <img src="./img/logo.png" width="50" height="50" ng-if="!message.attributes.sender && !message.attributes.feedback">\n\n\n      <h2 class="wrapText" ng-if="message.attributes.type !== \'feedbackRequest\'">\n        {{message.attributes.sender.attributes.firstName}} {{message.attributes.sender.attributes.lastName}}\n        <span ng-if="message.attributes.type !== \'message\'" class="messageType">{{message.attributes.type | messageType:message.attributes.activity.attributes:currentUser}}</span>\n      </h2>\n\n      <h2 class="wrapText" ng-if="message.attributes.type === \'feedbackRequest\'">\n        <span ng-if="message.attributes.feedback.attributes.rating">\n\n          <!-- Show name if not the current user -->\n          <span ng-if="currentUser.id !== message.attributes.feedback.attributes.reviewer.id">{{message.attributes.feedback.attributes.reviewer.attributes.firstName}} {{message.attributes.feedback.attributes.reviewer.attributes.lastName}} rated {{message.attributes.feedback.attributes.reviewer.attributes.gender | genderPronoun}}</span>\n\n          <!-- Show pronouns if current user -->\n          <span ng-if="currentUser.id === message.attributes.feedback.attributes.reviewer.id">Your rated your</span>\n        </span>\n\n\n        <span ng-if="!message.attributes.feedback.attributes.rating">How would you rate your</span>\n        {{message.attributes.activity.attributes.sport | activityVerb}} with {{message.attributes.feedback.attributes.reviewee.attributes.firstName}} {{message.attributes.feedback.attributes.reviewee.attributes.lastName}}\n        <span ng-if="!message.attributes.feedback.attributes.rating">?</span>\n      </h2>\n      <small class="muted">{{message.createdAt | showDate}}</small>\n    </div>\n\n    <!-- SHOW ACTIVITY STATUS IF REJECTED /TIMED OUT ETC -->\n    <div class="item item-body activityStatus" ng-show="message.attributes.type === \'proposeActivity\' && message.attributes.activity.attributes.status !== \'proposed\'">\n      <h2>{{message.attributes.activity.attributes.status | sentenceCase}}</h2>\n    </div>\n\n    <!-- SHOW MESSAGE TEXT IF EXISTS -->\n    <div class="item item-body notificationItem" ng-if="message.attributes.text">\n      <p class="wrapText">{{message.attributes.text}}</p>\n    </div>\n\n    <!-- // activity row -->\n    <div ng-if="showActivity" class="item item-body notificationItem">\n      <div class="row">\n        <div class="col col-66">\n          <h3><i class="icon-logo {{message.attributes.activity.attributes.sport}}Icon"></i> {{message.attributes.activity.attributes.date | date:\'EEEE, d MMMM\'}}</h3>\n        </div>\n        <div class="col">\n          <h3><i class="ion-clock {{message.attributes.activity.attributes.sport}}Icon"></i> {{message.attributes.activity.attributes.date | date:\'h:mm a\'}}</h3>\n        </div>\n      </div>\n      <div class="row">\n        <div class="col col-66 longText">\n          <p><i class="icon-{{message.attributes.activity.attributes.sport}} {{message.attributes.activity.attributes.sport}}Icon"></i>{{message.attributes.activity.attributes.locationName}}</p>\n        </div>\n        <div class="col">\n          <p><i class="icon-distance {{message.attributes.activity.attributes.sport}}Icon"></i> {{message.attributes.activity.attributes.distance}} km</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- ACTIONS -->\n    <div class="item tabs tabs-secondary tabs-icon-only" ng-if="showActivity && message.attributes.type === \'proposeActivity\' && message.attributes.activity.attributes.status === \'proposed\'">\n      <a class="tab-item" ng-click="acceptActivity(message)" prevent-default>\n        <i class="icon ion-checkmark success"></i>\n      </a>\n      <a class="tab-item">\n        <i class="icon ion-compose info"></i>\n      </a>\n      <a class="tab-item" ng-click="rejectActivity(message)" prevent-default>\n        <i class="icon ion-close danger"></i>\n      </a>\n    </div>\n\n\n    <!-- FEEDBACK -->\n    <div class="item item-body notificationItem" ng-if="message.attributes.type === \'feedbackRequest\'">\n      <!-- // actions if rating not present -->\n      <div ng-if="!message.attributes.feedback.attributes.rating">\n        <div>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.rating < 1, \'ion-ios7-star\': message.rating >= 1}" ng-click="setRating(message, 1)" prevent-default></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.rating < 2, \'ion-ios7-star\': message.rating >= 2}" ng-click="setRating(message, 2)" prevent-default></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.rating < 3, \'ion-ios7-star\': message.rating >= 3}" ng-click="setRating(message, 3)" prevent-default></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.rating < 4, \'ion-ios7-star\': message.rating >= 4}" ng-click="setRating(message, 4)" prevent-default></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.rating < 5, \'ion-ios7-star\': message.rating >= 5}" ng-click="setRating(message, 5)" prevent-default></i>\n        </div>\n\n        <br>\n        <label class="item item-input" prevent-default>\n          <textarea ng-model="message.comment" placeholder="Feedback" ng-maxlength="140"></textarea>\n        </label>\n\n        <button class="button button-{{message.attributes.activity.attributes.sport | colour}} button-block" ng-click="submitFeedback(message)" ng-disabled="message.rating === 0" prevent-default>Submit Feedback</button>\n      </div>\n\n      <!-- SHOW VALUES IF RATING IS PRESENT -->\n      <div ng-if="message.attributes.feedback.attributes.rating">\n        <div>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.attributes.feedback.attributes.rating < 1, \'ion-ios7-star\': message.attributes.feedback.attributes.rating >= 1}"></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.attributes.feedback.attributes.rating < 2, \'ion-ios7-star\': message.attributes.feedback.attributes.rating >= 2}"></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.attributes.feedback.attributes.rating < 3, \'ion-ios7-star\': message.attributes.feedback.attributes.rating >= 3}"></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.attributes.feedback.attributes.rating < 4, \'ion-ios7-star\': message.attributes.feedback.attributes.rating >= 4}"></i>\n          <i class="{{message.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': message.attributes.feedback.attributes.rating < 5, \'ion-ios7-star\': message.attributes.feedback.attributes.rating >= 5}"></i>\n        </div>\n        <p>{{message.attributes.feedback.attributes.comment}}</p>\n      </div>\n    </div>\n\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/directives/templates/userPreviousRuns.html",'<div class="userPreviousRuns" ng-if="feedbacks.length > 0">\n  <div class="row" ng-repeat="feedback in feedbacks">\n    <div class="col col-25">\n      <img ng-src="https://graph.facebook.com/{{feedback.attributes.reviewer.attributes.profileId}}/picture?type=small">\n    </div>\n    <div class="col col-33">\n      <i class="icon-{{feedback.attributes.activity.attributes.sport}} {{feedback.attributes.activity.attributes.sport}}Icon"></i> {{feedback.attributes.activity.attributes.distance | userMetric:viewer.attributes.metric}}<br>\n      <i class="{{feedback.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': feedback.attributes.rating < 1, \'ion-ios7-star\': feedback.attributes.rating >= 1}"></i>\n      <i class="{{feedback.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': feedback.attributes.rating < 2, \'ion-ios7-star\': feedback.attributes.rating >= 2}"></i>\n      <i class="{{feedback.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': feedback.attributes.rating < 3, \'ion-ios7-star\': feedback.attributes.rating >= 3}"></i>\n      <i class="{{feedback.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': feedback.attributes.rating < 4, \'ion-ios7-star\': feedback.attributes.rating >= 4}"></i>\n      <i class="{{feedback.attributes.activity.attributes.sport}}Icon" ng-class="{\'ion-ios7-star-outline\': feedback.attributes.rating < 5, \'ion-ios7-star\': feedback.attributes.rating >= 5}"></i>\n\n      <small class="muted">{{feedback.attributes.activity.attributes.date | date:shortDate}}</small>\n    </div>\n\n    <div class="col wrapText">\n      <p>\n        {{feedback.attributes.comment}}\n      </p>\n    </div>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/activity/directives/templates/userSummary.html",'<div class="row userSummary" ng-if="user">\n  <div class="col col-33">\n    <img ng-src="https://graph.facebook.com/{{user.attributes.profileId}}/picture?type=normal">\n    <h6 class="muted text-center">\n      Joined {{user.createdAt | date:\'MMM yyyy\'}} <br>\n      {{user.attributes.events}} events\n    </h6>\n  </div>\n  <div class="col">\n    <h4 class="userSummaryTitle">{{user.attributes.firstName}} {{user.attributes.lastName}}</h4>\n    <p class="userSummaryText muted">\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 1, \'ion-ios7-star-half\': user.attributes.rating === 1, \'ion-ios7-star\': user.attributes.rating >= 2}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 3, \'ion-ios7-star-half\': user.attributes.rating === 3, \'ion-ios7-star\': user.attributes.rating >= 4}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 5, \'ion-ios7-star-half\': user.attributes.rating === 5, \'ion-ios7-star\': user.attributes.rating >= 6}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 7, \'ion-ios7-star-half\': user.attributes.rating === 7, \'ion-ios7-star\': user.attributes.rating >= 8}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 9, \'ion-ios7-star-half\': user.attributes.rating === 9, \'ion-ios7-star\': user.attributes.rating >= 10}"></i>\n      &nbsp; {{user.attributes.ratingCount}}\n    </p>\n    <p class="userSummaryText">{{user.attributes.blurb}}</p>\n  </div>\n</div>\n')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/common/directives/templates/activityProfile.html",'\n\n<div ng-if="twainee.length > 1">\n  <div class="row userInfo">\n    <div class="col" ng-repeat="user in twainee" >\n      <img ng-src="https://graph.facebook.com/{{user.attributes.profile.id}}/picture?type=square" class="singleImage">\n    </div>\n    <div class="col">\n      <p ng-if="twainee.length > 3"> + {{twainee.length - 3}} more</p>\n    </div>\n  </div>\n</div>\n\n<div ng-if="user">\n  <div class="item item-avatar">\n    <img ng-src="https://graph.facebook.com/{{user.attributes.profile.id}}/picture?type=square">\n    <h2>{{user.attributes.firstName}} {{user.attributes.lastName}}</h2>\n    <p class="muted">\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 1, \'ion-ios7-star-half\': user.attributes.rating === 1, \'ion-ios7-star\': user.attributes.rating >= 2}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 3, \'ion-ios7-star-half\': user.attributes.rating === 3, \'ion-ios7-star\': user.attributes.rating >= 4}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 5, \'ion-ios7-star-half\': user.attributes.rating === 5, \'ion-ios7-star\': user.attributes.rating >= 6}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 7, \'ion-ios7-star-half\': user.attributes.rating === 7, \'ion-ios7-star\': user.attributes.rating >= 8}"></i>\n      <i class="twainersFont" ng-class="{\'ion-ios7-star-outline\': user.attributes.rating < 9, \'ion-ios7-star-half\': user.attributes.rating === 9, \'ion-ios7-star\': user.attributes.rating >= 10}"></i>\n      &nbsp; {{user.attributes.ratingCount}}<br>\n      {{user.attributes.events}} events\n    </p>\n  </div>\n</div>')}])}(),function(){try{app=angular.module("templates")}catch(e){app=angular.module("templates",[])}app.run(["$templateCache",function(e){"use strict";e.put("js/common/directives/templates/share.html",'<button class="button button-outline button-light button-wide" ng-click="share()">\n  <i class="ion-person-add"></i>\n  Invite your friends\n</button>')}])}();
angular.module("twainers.activity.filters",[]).filter("activitiesByStatus",function(){return function(t,e){var n;return n=t.filter("completed"===e?function(t){return"scheduled"===t.status&&t.date<new Date}:function(t){return t.status===e})}}).filter("activityVerb",function(){return function(t,e){var n;switch(t){case"running":n="run";break;case"cycling":n="cycle";break;case"swimming":n="swim";break;case"walking":n="walk"}return e&&(n+="s"),n}}).filter("showDate",["$filter",function(t){return function(e){var n=(new Date).getFullYear();return e.getFullYear()!==n?t("date")(e,"d/M/yy"):t("date")(e,"d MMM")}}]).filter("statusVerb",function(){return function(t){return"timeout"===t?"timed out":"was "+t}}).filter("genderPronoun",function(){return function(t){return"male"===t?"his":"her"}}).filter("colour",function(){return function(t){switch(t){case"running":return"balanced";case"cycling":return"assertive";case"swimming":return"positive";case"walking":return"calm"}}});
angular.module("twainers.activity",["twainers.activity.service","twainers.activity.filters","twainers.activity.directives"]).config(["$stateProvider",function(t){t.state("activities",{url:"/activities",templateUrl:"js/activity/templates/activities.html",controller:"ActivitiesCtrl","abstract":!0}).state("activities.scheduled",{url:"/scheduled",templateUrl:"js/activity/templates/activities-list.html"}).state("activities.proposed",{url:"/proposed",templateUrl:"js/activity/templates/activities-list.html"}).state("activities.requests",{url:"/requests",templateUrl:"js/activity/templates/activities-list.html"}).state("activities.completed",{url:"/completed",templateUrl:"js/activity/templates/activities-list.html"}).state("activity",{url:"/activity",templateUrl:"js/activity/templates/activity.html","abstract":!0,controller:"ActivityCtrl"}).state("activity.create",{url:"/create",templateUrl:"js/activity/templates/activityCreate.html",controller:"ActivityCreateCtrl"}).state("activity.show",{url:"/:activityId",templateUrl:"js/activity/templates/activityShow.html",controller:"ActivityViewCtrl",resolve:{activityFeedback:["activityService","$ionicLoading","$stateParams","$ionicPopup","notificationsService",function(t,e,i,a,r){return e.show({template:"Loading..."}),t.findById(i.activityId).then(function(t){return r.find({activity:t}).then(function(i){e.hide();var a=[];return t.messages=i.filter(function(t){return"feedbackRequest"!==t.attributes.type?t:t.attributes.feedback.attributes.rating?t:void a.push(t)}),{activity:t,feedback:a}})},function(){return e.hide(),a.alert({title:"Whoops!",template:"The activity could not be loaded"}),!1})}]}}).state("activity.edit",{url:"/:activityId/edit?status",templateUrl:"js/activity/templates/activityCreate.html",controller:"ActivityEditCtrl",resolve:{activity:["activityService","$ionicLoading","$stateParams","$ionicPopup","notificationsService",function(t,e,i,a,r){return e.show({template:"Loading..."}),t.findById(i.activityId).then(function(t){return r.find({activity:t}).then(function(i){return e.hide(),t.messages=i,t})},function(){return e.hide(),a.alert({title:"Whoops!",template:"The activity could not be loaded"}),!1})}]}})}]).controller("ActivitiesCtrl",["$scope","activityService","$state","$ionicLoading","Parse","notificationsService","$ionicPopup",function(t,e,i,a,r,n,s){var c,o=function(){c=e.getActivities(),t.type=i.current.name.split(".")[1],c&&(t.activities=c.filter(function(e){switch(t.type){case"scheduled":case"completed":return e.attributes.status===t.type;case"proposed":return e.attributes.status===t.type&&e.attributes.lastUpdatedBy.id!==r.User.current().id;case"requests":return"proposed"===e.attributes.status&&e.attributes.lastUpdatedBy.id===r.User.current().id}}))};a.show({template:"Loading..."}),e.find({twainee:r.User.current()}).then(function(t){a.hide(),c=t,o()},function(){return a.hide(),null}),t.navigation.hideBackButton=!0,t.$on("$stateChangeSuccess",o),t.currentUser=r.User.current();var u=function(t,i){a.show();var c,u=t.attributes.twainee.filter(function(t){return t.id!==r.User.current().id})[0];"scheduled"===i&&(c="acceptActivity"),"rejected"===i&&(c="rejectActivity"),e.update(t.id,{status:i}).then(function(){o(),a.hide(),n.create({activity:t,recipient:u,type:c})},function(t){a.hide(),console.log("Activity Accespt failed with ",t),s.alert({title:"Update failed",template:"The activity did not update. Please try again."})})};t.acceptActivity=function(t){u(t,"scheduled")},t.showActivity=function(t){"proposed"===t.attributes.status?(e.setAvailability(t),i.go("activity.edit",{activityId:t.id})):i.go("activity.show",{activityId:t.id})},t.rejectActivity=function(t){u(t,"rejected")}}]).controller("ActivityCtrl",["$scope","mapService",function(t,e){t.navigation.hideBackButton=!1,t.map={show:!0},t.toggleMap=function(){t.map.show=!t.map.show},t.findLocation=function(){e.findLocation({address:t.input.address}),t.input.address=""},t.getUserLocation=function(){e.getUserLocation()},t.calculateDateString=function(t,e){var i={},a=(t.getMonth()+1).toString();1===a.length&&(a="0"+a);var r=t.getDate().toString();if(1===r.length&&(r="0"+r),i.tempDate=t.getFullYear()+"-"+a+"-"+r,e.attributes.date){var n=t.getHours().toString();1===n.length&&(n="0"+n);var s=t.getMinutes().toString();1===s.length&&(s="0"+s),i.tempTime=n+":"+s}else-1!==e.attributes.times.indexOf("morning")?i.tempTime="08:00":-1!==e.attributes.times.indexOf("afternoon")?i.tempTime="12:00":-1!==e.attributes.times.indexOf("evening")?i.tempTime="18:00":-1!==e.attributes.times.indexOf("morning")&&(i.tempTime="23:00");return i},t.saveDateTime=function(t,e){if(!t.tempDate||!t.tempTime)return void(e.date=null);var i=t.tempDate.split("-"),a=t.tempTime.split(":");e.date=new Date(i[0],i[1]-1,i[2],a[0],a[1])},t.validateInput=function(t){var e={};return t.distance&&t.location&&t.locationName&&t.date&&t.date>Date.now()?e=null:(t.distance||(e.distance=!0),t.locationName||(e.location=!0),t.date||(e.date=!0),t.date<Date.now()&&(e.dateFuture=!0)),e},t.input={message:""}}]).controller("ActivityViewCtrl",["$scope","activityFeedback","$state","mapService","Parse","activityService","notificationsService","$ionicPopup",function(t,e,i,a,r,n,s,c){if(!e.activity)return i.go("activities.scheduled");t.navigation.hideBackButton=!1,t.currentUser=r.User.current(),t.activity=e.activity,t.feedback=e.feedback.filter(function(t){return t.attributes.feedback.attributes.reviewer.id===r.User.current().id?t:void 0}),t.$on("$viewContentLoaded",function(){a.initializeMap(t.activity.attributes,t.$apply,!0)}),t.member=!1,e.activity.attributes.twainee.forEach(function(e){e.id===r.User.current().id&&(t.member=!0)}),t.showMessages=!1,t.toggleMessages=function(){t.showMessages=!t.showMessages},t.edit=function(){i.go("activity.edit",{activityId:e.activity.id,status:"proposed"})};var o=function(i){s.create({activity:e.activity,recipient:t.activity.attributes.twainee,text:t.input.message,type:i}).then(function(e){t.activity.messages.unshift(e),t.input.message=""},function(t){console.log(t),c.alert({title:"Whoops",template:"Message not sent. Please try again."})})};t.join=function(){n.update(e.activity.id,{join:!0}).then(function(){o("joinActivity"),i.go("activities.scheduled")})},t.leave=function(){var t=c.confirm({title:"Quit Activity",template:"Are you sure you want to leave this activity?",buttons:[{text:"Cancel"},{text:"<b>Leave</b>",type:"button-assertive"}]});t.then(function(t){t&&n.update(e.activity.id,{leave:!0}).then(function(){o(e.activity.attributes.twainee.length>2?"leftActivity":"cancelledActivity"),i.go("activities.scheduled")})})},t.sendMessage=function(){o("message")}}]).controller("ActivityCreateCtrl",["$scope","$state","activityService","mapService","BLURB_INTRO","BLURB_END","$ionicPopup","Parse","$filter","userService","notificationsService","$q","$ionicLoading",function(t,e,i,a,r,n,s,c,o,u,l,v,d){t.navigation.hideBackButton=!1;var p=i.getAvailability();if(!p)return e.go("activities.scheduled");t.showPrevious=!1,t.togglePrevious=function(){t.showPrevious=!t.showPrevious},t.currentUser=c.User.current();var y;y=t.currentUser.attributes.metric?p.attributes.distance:o("metricConversion")(t.currentUser.attributes.metric,p.attributes.distance),t.activity={sport:p.attributes.sport,distance:y,location:p.attributes.location,speed:p.attributes.speed,user:p.attributes.user},t.action="Propose",t.$on("$viewContentLoaded",function(){a.initializeMap(t.activity,t.$apply),a.addClickHandler()});var f=new Date;t.time=t.calculateDateString(f,p),t.saveDateTime(t.time,t.activity),t.proposeRun=function(){if(t.invalid=t.validateInput(t.activity),!t.invalid){t.currentUser.attributes.metric||(t.activity.distance=o("metricConversion")(!0,t.activity.distance)),d.show({template:"Sending request..."});var a=function(e){var i=v.defer();return t.input.message?l.create({activity:e,recipient:t.activity.user,text:t.input.message,type:"proposeActivity"}).then(function(){i.resolve()},function(t){i.reject("Invalid Activity Message Creation"+t)}):i.resolve(),i.promise},p=function(){var e=v.defer();if(c.User.current().attributes.blurb)e.resolve();else{t.data={blurb:r+o("activityVerb")(t.activity.sport,!0)+n};var i=s.show({template:'<textarea ng-model="data.blurb" ng-maxlength="140"></textarea>',title:"Describe yourself",subTitle:"Give people a reason to accept your training request!",scope:t,buttons:[{text:"<b>Save</b>",type:"button-positive",onTap:function(e){return t.data.blurb?t.data.blurb:void e.preventDefault()}}]});i.then(function(t){u.update({blurb:t}),e.resolve()})}return e.promise},y=function(){d.hide();var i=s.alert({title:"Request sent",template:t.activity.user.attributes.firstName+" has been notified of the request. We will let you know when a response arrives."});i.then(function(){e.go("activities.requests")})};i.create(t.activity).then(a).then(p).then(y).catch(function(t){d.hide(),console.log("Error creating a new activity with error: ",t),s.alert({title:"Whoops",template:"There was an error creating the request. Please try again."})})}}}]).controller("ActivityEditCtrl",["$scope","activityService","$state","notificationsService","mapService","activity","$q","Parse","BLURB_INTRO","BLURB_END","$filter","$ionicPopup","userService","$stateParams",function(t,e,i,a,r,n,s,c,o,u,l,v,d,p){n||i.go("activities.scheduled"),t.activity={sport:n.attributes.sport,distance:n.attributes.distance,location:n.attributes.location,locationName:n.attributes.locationName,speed:n.attributes.speed,date:n.attributes.date,messages:n.messages},1===n.users.length?t.activity.user=n.users[0]:t.activity.users=n.users,t.currentUser=c.User.current(),t.action="Edit",t.map.show=!1,t.$on("$viewContentLoaded",function(){r.initializeMap(t.activity,t.$apply,!0),r.addClickHandler()}),t.time=t.calculateDateString(n.attributes.date,n),t.proposeRun=function(){if(t.invalid=t.validateInput(t.activity),!t.invalid){p.status&&(t.activity.status=p.status);var r=function(e){var i=s.defer(),r="";return p.status&&(r=c.User.current().attributes.firstName+" updated your scheduled activity. "),t.input.message||r?a.create({activity:e,recipient:t.activity.user,text:r+t.input.message,type:"proposeActivity"}).then(function(){i.resolve()},function(t){i.reject("Invalid Activity Message Creation"+t)}):i.resolve(),i.promise},y=function(){var e=s.defer();if(c.User.current().attributes.blurb)e.resolve();else{t.data={blurb:o+l("activityVerb")(t.activity.sport,!0)+u};var i=v.show({template:'<textarea ng-model="data.blurb" ng-maxlength="140"></textarea>',title:"Describe yourself",subTitle:"Give people a reason to accept your training request!",scope:t,buttons:[{text:"<b>Save</b>",type:"button-positive",onTap:function(e){return t.data.blurb?t.data.blurb:void e.preventDefault()}}]});i.then(function(t){d.update({blurb:t}),e.resolve()})}return e.promise},f=function(){var e=v.alert({title:"Request sent",template:t.activity.user.attributes.firstName+" has been notified of the request. We will let you know when a response arrives."});e.then(function(){i.go("activities.requests")})},m={locationName:t.activity.locationName,location:t.activity.location,distance:t.activity.distance,date:t.activity.date};t.activity.status&&(m.status=t.activity.status),e.update(n.id,m).then(r).then(y).then(f).catch(function(t){console.log("Error updating activity with error: ",t),v.alert({title:"Whoops",template:"There was an error updating the activity. Please try again."})})}}}]);
angular.module("twainers.activity.service",[]).factory("activityService",["Parse","$q",function(e,t){var i,n,r=[],o=function(i){var n=[];i.forEach(function(t){for(var i=t.attributes.twainee.length>4?4:t.attributes.twainee.length,r=0;i>r;r++){var o=t.attributes.twainee[r].id;o!==e.User.current().id&&-1===n.indexOf(o)&&n.push(t.attributes.twainee[r].id)}});var r=t.defer(),o=new e.Query("User");return o.containedIn("objectId",n),o.find(function(e){var t=e.length;i.forEach(function(i){i.users=[];for(var n=i.attributes.twainee.length>4?4:i.attributes.twainee.length,r=0;n>r;r++)for(var o=i.attributes.twainee[r].id,a=0;t>a;a++)e[a].id===o&&i.users.length<3&&i.users.push(e[a])}),r.resolve(i)},function(e){console.log("User lookup for activties failed with "+e),r.reject(e)}),r.promise};return{create:function(i){var n=t.defer(),a=e.Object.extend("Activity"),s=new a;s.set("sport",i.sport),s.set("distance",parseInt(i.distance));var c=new e.GeoPoint({latitude:parseFloat(i.location.latitude),longitude:parseFloat(i.location.longitude)});s.set("location",c),s.set("locationName",i.locationName),s.set("date",i.date),s.add("twainee",i.user),s.add("twainee",e.User.current()),s.set("speed",i.speed),s.set("status","proposed"),s.set("lastUpdatedBy",e.User.current());var u={"*":{read:!0}};return u[i.user.id]={read:!0,write:!0},u[e.User.current().id]={read:!0,write:!0},s.set("ACL",u),s.save(null,{success:function(e){console.log("New activity created with objectId: "+e.id),o([e]).then(function(t){r.push(t[0]),n.resolve(e)})},error:function(e,t){console.log("Failed to create new activity, with error code: "+t.description),n.reject(t)}}),n.promise},update:function(i,n){var o=t.defer(),a=r.filter(function(e){return e.id===i})[0],s=a.get("ACL"),c=e.Object.extend("Activity"),u=new c;if(u.id=i,n.join)s[e.User.current().id]={read:!0,write:!0},u.add("twainee",e.User.current()),u.set("ACL",s);else if(n.leave)delete s[e.User.current().id],u.set("ACL",s),2===a.attributes.twainee.length?u.set("status","rejected"):u.remove("twainee",e.User.current());else{if(n.location){var d=new e.GeoPoint({latitude:parseFloat(n.location.latitude),longitude:parseFloat(n.location.longitude)});u.set("location",d),delete n.location}Object.keys(n).forEach(function(e){u.set(e,n[e])}),u.set("lastUpdatedBy",e.User.current())}return u.save(null,{success:function(e){console.log("Activity updated with objectId: "+e.id);var t=r.map(function(e){return e.id}),i=t.indexOf(e.id);Object.keys(e.attributes).forEach(function(t){r[i].attributes[t]=e.attributes[t]}),o.resolve(e)},error:function(e,t){console.log("Failed to update activity, with error code: "+t.description),o.reject(t)}}),o.promise},find:function(i){var a=t.defer(),s=!1,c=new e.Query("Activity");if(i.twainee)r&&n>Date.now()-864e5&&(s=!0,a.resolve(r)),c.containedIn("twainee",[i.twainee]),c.ascending("date"),c.containedIn("status",["proposed","scheduled"]);else{if(!i.attributes.location)return a.reject("Invalid Query"),a.promise;c.withinKilometers("location",i.attributes.location,10),c.equalTo("status","scheduled"),c.notContainedIn("twainee",[e.User.current()])}return s||(c.limit(30),c.find(function(e){o(e).then(function(e){console.log("We have just found "+e.length+" activities."),i.twainee&&(r=e,n=Date.now()),a.resolve(e)},function(e){a.reject(e)})},function(e,t){console.log("Failed to find activities, with error code: "+t.description),a.reject(t)})),a.promise},findById:function(i){var n=t.defer(),a=!1;if(r&&r.forEach(function(e){e.id===i&&(a=!0,n.resolve(e))}),!a){var s=new e.Query("Activity");s.get(i,{success:function(e){var t=[e];o(t).then(function(e){console.log("Retrieved activity: "+e[0].id),r.push(e[0]),n.resolve(e[0])},function(e){n.reject(e)})},error:function(e,t){console.log("Failed to retrieve activity: "+e.id+" with error "+t),n.reject(null)}})}return n.promise},setAvailability:function(e){i=e},getAvailability:function(){return i},getActivities:function(){return r}}}]);
angular.module("twainers.availability.filters",[]).filter("matchGroup",function(){return function(n){return"activity"===n.type?n.twainee.count+" people":"Individual"}}).filter("sentenceCase",function(){return function(n){return n.charAt(0).toUpperCase()+n.slice(1)}}).filter("shortLevel",function(){return function(n){return n.charAt(0).toUpperCase()+n.slice(1,3)}}).filter("distanceOptions",function(){var n,r;return function(t,e){switch(t){case"running":return n=e?3:2,r=e?50:31,{min:n,max:r};case"cycling":return n=e?20:12.5,r=e?200:125,{min:n,max:r};case"walking":return n=e?2:1,r=e?20:12.5,{min:n,max:r};case"swimming":return n=e?.5:.3,r=e?10:6,{min:n,max:r}}}}).filter("defaultDistance",function(){return function(n,r){switch(n){case"running":return r?10:6;case"cycling":return r?50:31;case"walking":return r?4:2.5;case"swimming":return r?1:.5}}}).filter("metricToString",function(){return function(n){return n?"km":"mi"}}).filter("metricConversion",function(){var n=1.60934;return function(r,t){var e;return e=r?n:1/n,Math.round(e*t*10)/10}}).filter("defaultSpeed",function(){return function(n,r){switch(n){case"running":return r?12:7.5;case"cycling":return r?25:15;case"walking":return r?6:4;case"swimming":return r?1.5:1}}}).filter("userMetric",["$filter",function(n){return function(r,t){return t?r+" km":(r=n("metricConversion")(!1,r),r+" mi")}}]);
angular.module("twainers.availability",["twainers.availability.service","twainers.availability.filters","common.timeService","common.mapService"]).config(["$stateProvider",function(t){t.state("availability",{url:"/availability",templateUrl:"js/availability/templates/availability.html","abstract":!0}).state("availability.list",{url:"",templateUrl:"js/availability/templates/availabilities.html",controller:"AvailabilitiesCtrl"}).state("availability.create",{url:"/create",templateUrl:"js/availability/templates/create.html",controller:"AvailabilityCreateCtrl","abstract":!0}).state("availability.create.sport",{url:"/sport",templateUrl:"js/availability/templates/sport.html",controller:"AvailabilityCreateSportCtrl"}).state("availability.create.distance",{url:"/distance",templateUrl:"js/availability/templates/distance.html",controller:"AvailabilityCreateDistanceCtrl"}).state("availability.create.speed",{url:"/speed",templateUrl:"js/availability/templates/speed.html",controller:"AvailabilityCreateSpeedCtrl"}).state("availability.create.location",{url:"/location",templateUrl:"js/availability/templates/location.html",controller:"AvailabilityCreateLocationCtrl"}).state("availability.create.times",{url:"/time",templateUrl:"js/availability/templates/time.html",controller:"AvailabilityCreateTimeCtrl"}).state("availability.results",{url:"/results",templateUrl:"js/availability/templates/results.html",controller:"AvailabilityResultsCtrl",resolve:{availability:["availabilityService",function(t){var e=t.getAvailability();return e}]}})}]).controller("AvailabilitiesCtrl",["$scope","availabilityService","$state","timeService","$ionicPopup","$ionicLoading",function(t,e,i,a,l,r){t.navigation.hideBackButton=!0,e.newObject={},t.times=a,t.currentUser=Parse.User.current(),r.show({content:"Loading..."}),e.find({owner:Parse.User.current()}).then(function(e){r.hide(),e.length>0?t.availabilities=e:i.go("availability.create.sport")},function(){r.hide(),l.alert({title:"Whoops!",template:"The availabilities could not be loaded"})}),t.remove=function(i){var a=l.confirm({title:"Delete Availability",template:"Are you sure you want to delete this availability?",buttons:[{text:"Cancel"},{text:"<b>Remove</b>",type:"button-assertive"}]});a.then(function(a){if(a){var r=t.availabilities.indexOf(i);e.remove(i.id).then(function(){},function(e){console.log("availability remove error: ",e),t.availabilities.splice(r,1,i),l.alert({title:"Whoops!",template:"The availability could not be removed"})}),t.availabilities.splice(r,1)}})},t.getResults=function(t){e.setAvailability(t),i.go("availability.results")}}]).controller("AvailabilityCreateCtrl",["$scope","availabilityService",function(t,e){t.navigation.hideBackButton=!1,e.newObject={},t.availability=e.newObject}]).controller("AvailabilityCreateSportCtrl",["$scope","$state","availabilityService",function(t,e,i){t.setSport=function(t){i.newObject.sport=t,e.go("availability.create.distance")}}]).controller("AvailabilityCreateDistanceCtrl",["$scope","availabilityService","$state","$filter","userService",function(t,e,i,a,l){if(!e.newObject.sport)return i.go("availability.create.sport");t.sport=e.newObject.sport;var r=Parse.User.current().attributes.metric;t.metricDisplay=a("metricToString")(r),t.distanceOptions=a("distanceOptions")(t.sport,r),t.temp={metric:angular.copy(r),distance:a("defaultDistance")(t.sport,r)},t.toggleMetric=function(){t.temp.metric=!t.temp.metric,t.metricDisplay=a("metricToString")(t.temp.metric),t.distanceOptions=a("distanceOptions")(t.sport,t.temp.metric),t.temp.distance=a("metricConversion")(t.temp.metric,t.temp.distance)},t.next=function(){t.temp.metric!==r&&l.update({metric:t.temp.metric}),e.metric=t.temp.metric,e.newObject.distance=t.temp.metric?t.temp.distance:a("metricConversion")(!t.temp.metric,t.temp.distance),i.go("availability.create.speed")}}]).controller("AvailabilityCreateSpeedCtrl",["$scope","$state","availabilityService","$filter",function(t,e,i,a){if(!i.newObject.sport)return e.go("availability.create.sport");t.sport=i.newObject.sport;var l=i.metric;console.log(l),t.metricDisplay=a("metricToString")(l),t.temp={speed:a("defaultSpeed")(t.sport,l),speedEditable:!1},t.toggleSpeed=function(){t.temp.speedEditable=!t.temp.speedEditable,t.temp.speedEditable&&(t.temp.speed=a("defaultSpeed")(t.sport,l))},t.next=function(){i.newObject.speed=t.temp.speed,e.go("availability.create.location")}}]).controller("AvailabilityCreateLocationCtrl",["$scope","availabilityService","mapService","$state",function(t,e,i,a){return e.newObject.sport?(t.sport=e.newObject.sport,t.availability=e.newObject,t.$on("$viewContentLoaded",function(){i.initializeMap(e.newObject,t.$apply),i.getUserLocation(),i.addClickHandler()}),t.input={address:""},t.findLocation=function(){i.findLocation({address:t.input.address}),t.input.address=""},t.map={show:!0},void(t.toggleMap=function(){t.map.show=!t.map.show})):a.go("availability.create.sport")}]).controller("AvailabilityCreateTimeCtrl",["$scope","$state","availabilityService","timeService","$ionicPopup",function(t,e,i,a,l){return i.newObject.sport?(t.sport=i.newObject.sport,a.reset(),t.times=a,t.toggle=function(e){e.checked=!e.checked,t.updateTime()},t.updateTime=function(){i.newObject.days=[],angular.forEach(t.times.days,function(t){t.checked&&i.newObject.days.push(t.value)}),i.newObject.times=[],angular.forEach(t.times.times,function(t){t.checked&&i.newObject.times.push(t.value)})},t.validateTime=function(){return i.newObject.days&&i.newObject.times&&0!==i.newObject.days.length&&0!==i.newObject.times.length?!1:!0},void(t.create=function(){i.create(i.newObject).then(function(t){i.setAvailability(t),e.go("availability.results")},function(t){console.log(t),l.alert({title:"Whoops!",template:"The availability could not be created. Please try again."})})})):e.go("availability.create.sport")}]).controller("AvailabilityResultsCtrl",["$scope","availabilityService","activityService","$state","$ionicPopup","$ionicLoading","availability","timeService","Parse",function(t,e,i,a,l,r,o,n,c){if(t.navigation.hideBackButton=!0,!o)return a.go("availability.list");e.newObject.sport&&(e.newObject={},t.newAvailability=!0),t.currentUser=c.User.current();var s=[],p=[],v=0;r.show({template:"Loading..."});var b=!1,m=function(e){v++,e?(r.hide(),l.alert({title:"Whoops!",template:"The matches could not be loaded. Please try again."}),b=!0,a.go("availability.list",{owner:c.User.current()})):2===v&&(r.hide(),t.matches=s.concat(p))};e.find(o).then(function(t){t.forEach(function(t){t.type="availability",t.attributes.distanceFrom=Math.round(10*t.attributes.location.kilometersTo(o.attributes.location))/10,s.push(t)}),m()},function(t){b||m(t)}),i.find(o).then(function(t){t.forEach(function(t){t.type="activity",t.attributes.distanceFrom=Math.round(10*t.attributes.location.kilometersTo(o.attributes.location))/10,p.push(t)}),m()},function(t){b||m(t)}),t.times=n,t.click=function(t){return"activity"===t.type?a.go("activity.show",{activityId:t.id}):(i.setAvailability(t),a.go("activity.create"))}}]);
angular.module("twainers.availability.service",[]).factory("availabilityService",["Parse","$q","WITHIN_DISTANCE",function(e,t,i){var a,r,o={},s=i;return{create:function(i){var a=t.defer(),r=e.Object.extend("Availability"),o=new r;o.set("sport",i.sport),o.set("distance",parseInt(i.distance));var s=new e.GeoPoint({latitude:parseFloat(i.location.latitude),longitude:parseFloat(i.location.longitude)});o.set("location",s),o.set("locationName",i.locationName),i.days.forEach(function(e){o.add("days",e)}),i.times.forEach(function(e){o.add("times",e)}),o.set("user",e.User.current()),o.set("speed",i.speed),o.set("status","active");var n={"*":{read:!0}};return n[e.User.current().id]={read:!0,write:!0},o.set("ACL",n),o.save(null,{success:function(e){console.log("New availability created with objectId: "+e.id),a.resolve(e)},error:function(e,t){console.log("Failed to create new availability, with error code: "+t.description),a.reject(t)}}),a.promise},remove:function(i){var a=t.defer(),r=new e.Query("Availability");return r.get(i,{success:function(e){e.set("status","inactive"),e.save(null,{success:function(e){console.log("Availability removed with objectId: "+e.id),a.resolve(e)},error:function(e,t){console.log("Failed to remove availability, with error code: "+t.description),a.reject(t)}})},failure:function(e){console.log("Failed to find availability to remove: ",e),a.reject(e)}}),a.promise},find:function(i){var a=t.defer(),r=new e.Query("Availability");if(r.equalTo("status","active"),i.owner)r.equalTo("user",i.owner);else{if(!(i.attributes.location&&i.attributes.sport&&i.attributes.user&&i.attributes.days&&i.attributes.times))return a.reject("Invalid Query"),a.promise;r.equalTo("sport",i.attributes.sport),r.greaterThanOrEqualTo("distance",i.attributes.distance-2),r.lessThanOrEqualTo("distance",i.attributes.distance+2),r.greaterThanOrEqualTo("speed",i.attributes.speed-2),r.lessThanOrEqualTo("speed",i.attributes.speed+2),r.containedIn("days",i.attributes.days),r.containedIn("times",i.attributes.times),r.notEqualTo("user",i.attributes.user),r.withinKilometers("location",i.attributes.location,s),r.near("location",i.attributes.location),r.include("user")}return r.find(function(e){console.log("We have just found "+e.length+" availabilities."),a.resolve(e)},function(e,t){console.log("Failed to create new object, with error code: "+t.description),a.reject(t)}),a.promise},setAvailability:function(e){a=e},getAvailability:function(){return a},metric:r,newObject:o}}]);
angular.module("common.mapService",[]).factory("mapService",["Parse","$ionicPopup","$ionicLoading","$q","$cordovaGeolocation",function(o,e,t,n,a){var i,l,c,d,r,s=function(o){i.geocode({latLng:o},function(t,n){if(n===google.maps.GeocoderStatus.OK){d.location={latitude:o.lat(),longitude:o.lng()},c.setPosition(o),l.setCenter(o);var a={},i=!1,s="neighborhood sublocality locality".split(" ");t.forEach(function(o){a[o.types[0]]||(a[o.types[0]]=o.formatted_address,i||-1===s.indexOf(o.types[0])||(i=!0,d.locationName=o.formatted_address))}),i||(a.route?(d.locationName=a.route,i=!0):d.locationName="Name not found"),r()}else console.log("Geocoder failed due to: "+n),e.alert({title:"Whoops!",template:"The location could not be found"})})};return{initializeMap:function(o,e,t){d=o,r=e;var n,a,s;o.location?(a=o.location._latitude,s=o.location._longitude):(a=53.348699,s=-6.30744),n=new google.maps.LatLng(a,s);var u={center:n,zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP};l=new google.maps.Map(document.getElementById("map"),u),i=new google.maps.Geocoder;var g={map:l};t&&(g.position=n),c=new google.maps.Marker(g)},addClickHandler:function(){google.maps.event.addListener(l,"click",function(o){s(o.latLng)})},findLocation:function(o){i.geocode({address:o.address},function(o,t){t===google.maps.GeocoderStatus.OK?s(o[0].geometry.location):(console.log("Geocode was not successful for the following reason: "+t),e.alert({title:"Whoops!",template:"The location could not be found"}))})},getUserLocation:function(){t.show({content:"Getting current location...",showBackdrop:!1}),a.getCurrentPosition().then(function(o){var e=new google.maps.LatLng(o.coords.latitude,o.coords.longitude);t.hide(),s(e)},function(){t.hide(),e.alert({title:"Whoops!",template:"We could not load your location"})})}}}]);
angular.module("common.timeService",[]).factory("timeService",function(){var e={days:[{text:"Monday",value:"monday",checked:!1},{text:"Tuesday",value:"tuesday",checked:!1},{text:"Wednesday",value:"wednesday",checked:!1},{text:"Thursday",value:"thursday",checked:!1},{text:"Friday",value:"friday",checked:!1},{text:"Saturday",value:"saturday",checked:!1},{text:"Sunday",value:"sunday",checked:!1}],times:[{text:"Morning",value:"morning",checked:!1},{text:"Afternoon",value:"afternoon",checked:!1},{text:"Evening",value:"evening",checked:!1},{text:"Night",value:"night",checked:!1}],dayIcon:function(e,t){var c="off";return!t&&e.checked?c="on":t&&-1!==t.indexOf(e.value)?c="on":c+=" muted","icon-"+e.value+"-"+c},timeIcon:function(e,t){var c="off";return!t&&e.checked?c="on":t&&-1!==t.indexOf(e.value)?c="on":c+=" muted","icon-"+e.value+"-"+c},reset:function(){e.days.forEach(function(e){e.checked=!1}),e.times.forEach(function(e){e.checked=!1})}};return e});
angular.module("common.userService",[]).factory("userService",["Parse","$q",function(e,o){return{update:function(o){var r=e.Object.extend("User"),t=new r;t.id=e.User.current().id,Object.keys(o).forEach(function(e){t.set(e,o[e])}),t.save(null,{success:function(o){console.log("user udpated: ",o),e.User.current().fetch()},error:function(e){console.log("Error updating user "+t.id+" with erro: "+e)}})},login:function(){var r=o.defer();return e.FacebookUtils.logIn("public_profile, email, read_friendlists, user_birthday",{success:function(e){var o=!1;window.FB.api("/me","get",null,function(t){if(e.set("firstName",t.first_name),e.set("lastName",t.last_name),t.birthday){var n=t.birthday.split("/"),s=new Date(Date.UTC(n[2],n[0]-1,n[1]));e.set("birthday",s)}e.set("gender",t.gender),e.set("email",t.email),e.set("profileId",t.id),e.set("profile",t),e.existed()||(e.set("rating",9),e.set("events",0),e.set("notifications",{join:!0,leave:!0,request:!0,message:!0}),e.set("metric",!0)),e.save(null,{success:function(e){e.existed()?console.log("User logged in through Facebook!"):(o=!0,console.log("User signed up and logged in through Facebook!")),r.resolve(e,o)},error:function(e,o){r.reject(o)}})})},error:function(o,t){console.log("User cancelled the Facebook login or did not fully authorize."),e.User.logOut(function(){console.log("LogOut succeeded"),r.resolve(o)},function(){console.log("LogOut failed"),r.reject(t)})}}),r.promise}}}]);
angular.module("twainers.feedback",["twainers.feedback.service"]);
angular.module("twainers.feedback.service",[]).factory("feedbackService",["Parse","$q",function(e,r){return{find:function(i){var n=r.defer(),t=new e.Query("Feedback");return i.reviewee&&(t.equalTo("reviewee",i.reviewee),t.include("reviewer"),t.include("activity")),i.reviewer&&(t.equalTo("reviewer",i.reviewer),t.include("reviewee")),i.limit&&t.limit(i.limit),t.exists("rating"),t.descending("createdAt"),t.find(function(e){console.log("We have just found "+e.length+" feedbacks."),n.resolve(e)},function(e,r){console.log("Failed to find feedbacks, with error code: "+r.description),n.reject(r)}),n.promise},update:function(i,n){var t=r.defer(),c=e.Object.extend("Feedback"),o=new c;o.id=i;var d={"*":{read:!0}};return Object.keys(n).forEach(function(e){o.set(e,n[e]),"reviewee"===e&&(d[n[e].id]={read:!0,write:!0},o.set("ACL",d))}),o.save(null,{success:function(){t.resolve()},failure:function(e){console.log("Failed to update feedback with error ",e),t.reject(e)}}),t.promise}}}]);
angular.module("twainers.notifications.filters",[]).filter("messageType",["$filter",function(e){return function(t,r,i){var a=e("activityVerb")(r.sport);switch(t){case"proposeActivity":return"proposed a "+a;case"acceptActivity":return"accepted your "+a;case"rejectActivity":return"rejected your "+a;case"leftActivity":return"left the "+a;case"cancelledActivity":return"cancelled your "+a;case"message":return"Message: ";case"timeoutActivity":if(i.id===r.lastUpdatedBy.id){var c=r.twainee.filter(function(e){return e.id!==i.id?e:void 0})[0],s=c.attributes.firstName+" "+c.attributes.lastName;return"Sorry. Your "+a+" request timed out. You never received a response from "+s+"!"}return"Sorry. The "+a+" request timed out. You never responded!";case"feedbackRequest":return"Rate your experience"}}}]);
angular.module("twainers.notifications",["twainers.notifications.service","twainers.notifications.filters"]).config(["$stateProvider",function(i){i.state("notifications",{url:"/notifications",templateUrl:"js/notifications/templates/notifications.html",controller:"NotificationsCtrl"})}]).controller("NotificationsCtrl",["$scope","notificationsService",function(i,t){i.navigation.hideBackButton=!1,i.notifications=t.getNotifications(),i.currentUser=Parse.User.current(),t.read(i.notifications)}]);
angular.module("twainers.notifications.service",[]).factory("notificationsService",["Parse","$q",function(e,t){var i=[],r={create:function(i){var r=t.defer(),n=e.Object.extend("Message"),a=new n;a.set("sender",e.User.current()),a.set("activity",i.activity),a.set("type",i.type),i.text&&a.set("text",i.text);var c=e.Object.extend("MessageRecipient"),s=[a];return Array.isArray(i.recipient)||(i.recipient=[i.recipient]),i.recipient.forEach(function(t){if(t.id!==e.User.current().id){var i={"*":{read:!0}};i[t.id]={read:!0,write:!0};var r=new c;r.set("message",a),r.set("read",!1),r.set("recipient",t),r.set("ACL",i),s.push(r)}}),e.Object.saveAll(s,{success:function(e){var t=e.shift();t.attributes.recipients=[],e.forEach(function(e){t.attributes.recipients.push({attributes:{read:e.attributes.read,recipient:e.attributes.recipient}})}),r.resolve(t)},error:function(e,t){console.error(t),r.reject(t)}}),r.promise},find:function(r){var n,a=t.defer();if(r.recipient)n=new e.Query("MessageRecipient"),n.equalTo("recipient",r.recipient),n.include("message"),n.include("message.sender"),n.include("message.activity"),n.include("message.activity.twainee"),n.include("message.feedback"),n.include("message.feedback.reviewee"),n.include("message.feedback.reviewer");else{if(!r.activity)return a.reject("Invalid Query"),a.promise;n=new e.Query("Message"),n.equalTo("activity",r.activity),n.include("sender"),n.include("activity"),n.include("activity.twainee"),n.include("feedback"),n.include("feedback.reviewee"),n.include("feedback.reviewer")}return n.descending("createdAt"),n.find(function(e){console.log("Found "+e.length+" messages");var t=[];e.forEach(function(e){if(e.attributes.message){var i=e.attributes.message;i.attributes.read=e.attributes.read,i.attributes.recipient=e.attributes.recipient,i.recipientId=e.id,t.push(i)}}),t.length>0&&(e=t),r.recipient&&(i=e),a.resolve(e)},function(e,t){console.error("We failed to retrieve messages. "+JSON.stringify(t)),a.reject(t)}),a.promise},read:function(r){var n=t.defer(),a=[],c=[],s=e.Object.extend("MessageRecipient");return r.forEach(function(e){if(c.push(e.recipientId),!e.attributes.read){var t=new s;t.id=e.recipientId,t.set("read",!0),a.push(t)}}),a.length>0?e.Object.saveAll(a,function(){i.forEach(function(e){-1!==c.indexOf(e.recipientId)&&(e.attributes.read=!0)}),n.resolve()},function(e){console.error(e),n.reject(e)}):n.resolve(),n.promise},getNotifications:function(){return i},getNotificationCount:function(){var e=r.getNotifications();return e&&e.length>1?e.reduce(function(e,t){return t.attributes.read?e:e+1},0):e&&1===e.length?e[0].attributes.read?void 0:1:0},updateFeedback:function(e){i.forEach(function(t){t.id===e.id&&(e.attributes.feedback.attributes.rating=e.rating,e.attributes.feedback.attributes.comment=e.comment)})}};return r}]);
angular.module("twainers.profile",["common.userService"]).config(["$stateProvider",function(t){t.state("profile",{url:"/profile",templateUrl:"js/profile/templates/profile.html",controller:"ProfileCtrl"}).state("terms",{url:"/terms",templateUrl:"js/profile/templates/termsMain.html",controller:"TermsCtrl","abstract":!0}).state("terms.menu",{url:"",templateUrl:"js/profile/templates/termsMenu.html"}).state("terms.terms",{url:"/terms",templateUrl:"js/profile/templates/terms.html"}).state("terms.privacy",{url:"/privacy",templateUrl:"js/profile/templates/privacy.html"}).state("terms.safety",{url:"/safety",templateUrl:"js/profile/templates/safety.html"}).state("terms.arbitration",{url:"/arbitration",templateUrl:"js/profile/templates/arbitration.html"}).state("settings",{url:"/settings",templateUrl:"js/profile/templates/settings.html",controller:"SettingsCtrl"})}]).controller("ProfileCtrl",["$scope","userService",function(t,e){t.navigation.hideBackButton=!1,t.blurb=Parse.User.current().attributes.blurb,t.updateBlurb=function(){e.update({blurb:t.blurb})}}]).controller("TermsCtrl",["$scope",function(t){t.navigation.hideBackButton=!1}]).controller("SettingsCtrl",["userService","$scope",function(t,e){e.navigation.hideBackButton=!1,e.notifications=Parse.User.current().attributes.notifications,e.metric=Parse.User.current().attributes.metric,e.setMetric=function(r){e.metric!==r&&(e.metric=!e.metric,t.update({metric:e.metric}))},e.updateSettings=function(e){t.update(e)}}]);
angular.module("twainers.activity.directives.activityMessages",[]).directive("activityMessages",function(){return{restrict:"E",templateUrl:"js/activity/directives/templates/activityMessages.html",scope:{messages:"=",showActivity:"=",currentUser:"="},controller:["$scope","$state","activityService","$ionicLoading","Parse","notificationsService","$ionicPopup","feedbackService",function(t,e,i,a,c,s,n,r){t.state=e,t.messagesExist=function(){return t.messages&&t.messages.length>0?!0:!1},t.goToActivity=function(t){"proposed"===t.attributes.status?(i.setAvailability(t),e.go("activity.edit",{activityId:t.id})):e.go("activity.show",{activityId:t.id})};var o=function(t,e){var r=t.attributes.activity;t.attributes.read=!0,a.show();var o,u=r.attributes.twainee.filter(function(t){return t.id!==c.User.current().id})[0];"scheduled"===e&&(o="acceptActivity"),"rejected"===e&&(o="rejectActivity"),i.update(r.id,{status:e}).then(function(){a.hide(),r.attributes.status=e,s.create({activity:r,recipient:u,type:o})},function(t){a.hide(),console.log("Activity Accept failed with ",t),n.alert({title:"Update failed",template:"The activity did not update. Please try again."})})};t.acceptActivity=function(t){o(t,"scheduled")},t.rejectActivity=function(t){o(t,"rejected"),t.attributes.read=!0},t.messages&&t.messages.forEach(function(t){"feedbackRequest"===t.attributes.type&&(t.rating=0)}),t.setRating=function(t,e){t.rating=e},t.submitFeedback=function(t){r.update(t.attributes.feedback.id,{rating:t.rating,comment:t.comment}).then(function(){s.updateFeedback(t)})}}]}});
angular.module("twainers.activity.directives",["twainers.activity.directives.userSummary","twainers.activity.directives.userPreviousRuns","twainers.activity.directives.activityMessages"]);
angular.module("twainers.activity.directives.userPreviousRuns",["twainers.feedback.service"]).directive("userPreviousRuns",["feedbackService",function(e){return{restrict:"E",templateUrl:"js/activity/directives/templates/userPreviousRuns.html",scope:{user:"=",viewer:"="},compile:function(){return{pre:function(i){e.find({reviewee:i.user,limit:10}).then(function(e){i.feedbacks=e},function(){i.feedbacks=[]})}}}}}]);
angular.module("twainers.activity.directives.userSummary",[]).directive("userSummary",function(){return{restrict:"E",templateUrl:"js/activity/directives/templates/userSummary.html",scope:{user:"="}}});
angular.module("common.directives.activityProfile",[]).directive("activityProfile",function(){return{restrict:"E",templateUrl:"js/common/directives/templates/activityProfile.html",scope:{user:"=",twainee:"="},link:{pre:function(e){e.twainee&&1===e.twainee.length&&(e.user=e.twainee[0])}}}});
angular.module("common.directives",["common.directives.activityProfile","common.directives.preventDefault","common.directives.share"]);
angular.module("common.directives.preventDefault",[]).directive("preventDefault",function(){return{restrict:"A",link:function(e,t){t.on("click",function(e){e.preventDefault(),e.stopPropagation()})}}});
angular.module("common.directives.share",[]).directive("socialShare",function(){return{restrict:"E",templateUrl:"js/common/directives/templates/share.html",controller:["$scope","$cordovaSocialSharing",function(e,i){e.share=function(){i.canShareVia(socialType,message,image,link).then(function(){},function(){})}}]}});